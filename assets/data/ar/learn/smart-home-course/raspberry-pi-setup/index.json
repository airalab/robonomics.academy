{"hash":"94f13789db7ff3910ce38bd85f3d1c9bd0ae6890","data":{"course":{"id":"e7d8b1cc2a0f3edd3eb5a5a7e9b4c9cd","title":"الدرس #2، إعداد Raspberry Pi","description":"دورة مساعد المنزل","content":"\n## مقدمة\n\nفي هذا الدرس، ستقوم بتجهيز Raspberry Pi الخاص بك ليصبح مركزًا للإنترنت الأشياء. ستقوم بتثبيت وتكوين جميع المكونات اللازمة بتسلسل، وهي:\n\n<List>\n\n- توزيعة Ubuntu Linux لـ Raspberry Pi كنظام تشغيل خادم؛\n- حزم Home Assistant؛\n- حزم IPFS؛\n- مكتبة robonomics-interface.\n\n</List>\n\n## تعليمات\n\n<List type=\"numbers\">\n\n<li>\n\nتحضير وتكوين Raspberry Pi\n\n<List>\n\n  <li>\n\n  قم بتنزيل صورة [Ubuntu Server 22.04 LTS بتقنية 64 بت](https://ubuntu.com/download/raspberry-pi) أو أحدث لـ Raspberry Pi.\n  </li>\n\n  <li>\n\n  قم بتنزيل وتثبيت أداة لكتابة ملفات الصور تسمى [Raspberry Pi Imager](https://www.raspberrypi.com/software/) على جهاز الكمبيوتر الخاص بك.\n  </li>\n\n  <li>\n\n  أدخل بطاقة SD وقم بتشغيل Raspberry Pi Imager. حدد الصورة المطلوبة (التي قمت بتنزيلها للتو) كنظام التشغيل وتأكد من تحديد بطاقة SD الخاصة بك من قائمة السحب والإفلات.\n\n  </li>\n\n  <li>\n\n  افتح الإعدادات وتحقق من الخيار <code>تمكين SSH</code> مع المعلمة <code>استخدام المصادقة بلمة المرور</code>.\n\n  \\- في <code>تعيين اسم المستخدم وكلمة المرور</code>، أضف اسم المستخدم وكلمة المرور لمستخدم Raspberry Pi الخاص بك.\n\n  \\- في <code>تكوين شبكة LAN اللاسلكية</code>، قدم شبكة Wi-Fi الخاصة بك مع كلمة المرور الخاصة بها واختر بلدك من قائمة السحب والإفلات. ثم <code>اكتب</code> الصورة.\n\n  <robo-academy-note type=\"okay\">\n  تأكد من إدخال اسم Wi-Fi الفعلي وكلمة مرور Wi-Fi الخاصة بك.\n  </robo-academy-note>\n\n  <LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmY3mEGvUNDT9bKhVhR21JY8RaWp3CB8JNAX1VDHMnwjxw', type:'mp4'}]\" />\n\n  </li>\n\n  <li>\n\n  انتظر حتى ينتهي الكتابة، ثم أدخل بطاقة SD في Raspberry Pi وشغله. يجب أن يتصل بشبكة Wi-Fi الخاصة بك، والأمر سيستغرق بعض الوقت.\n\n  </li>\n  \n  <li>\n\n  الآن تحتاج إلى العثور على عنوان الجهاز. يمكنك استخدام طرق مختلفة لفحص الشبكة، مثل [تطبيق Fing](https://www.fing.com/products)، الأمر <code>arp -a</code> أو [nmap](https://nmap.org/download.html). سيتم استخدام الأخير في الخطوة التالية.\n\n  قم بتثبيت nmap بأمر\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get install nmap</LessonCodeWrapper>\n\n  ثم ابحث عن عنوانك في شبكتك المحلية. يجب أن يبدو مثل <code>192.168.xxx.xxx</code> أو <code>172.xxx.xxx.xxx.</code> كن حذرًا حيث يمكن لـ nmap العثور على العديد من العناوين في شبكتك المحلية.\n\n  <LessonCodeWrapper language=\"bash\" noLines>ip a</LessonCodeWrapper>\n\n  ثم قم بفحص شبكتك كما هو موضح أدناه عن طريق استبدال الأوكتيت الأخير من العنوان بـ <code>0</code>:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo nmap -sP 192.168.xxx.0/24</LessonCodeWrapper>\n\n  سيكون مخرج الأمر شيئًا مثل هذا:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noCopyIcon noLines>\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-26 13:50 CEST\nNmap scan report for _gateway (192.168.43.1)\nHost is up (0.015s latency).\nMAC Address: 8E:F5:A3:DB:02:24 (Unknown)\nNmap scan report for ubuntu (192.168.43.56)\nHost is up (0.049s latency).\nMAC Address: DC:A6:32:04:45:50 (Raspberry Pi Trading)\nNmap scan report for LAPTOP-NO7 (192.168.43.234)\nHost is up (0.00057s latency).\nMAC Address: 7C:B3:7D:9E:94:DA (Intel Corporate)\nNmap scan report for ed-vm (192.168.43.138)\nHost is up.\nNmap done: 256 IP addresses (4 hosts up) scanned in 2.07 seconds\n</LessonCodeWrapper>\n\n  في هذا المثال العنوان هو <code>192.168.43.56.</code>\n\n  </li>\n\n  <li>\n\n  قم بالاتصال بـ Raspberry Pi عبر SSH باستخدام عنوان IP الذي تم العثور عليه. استخدم اسم المستخدم وكلمة المرور التي أنشأتها سابقًا.\n  \n  <LessonCodeWrapper language=\"bash\" noLines>ssh ubuntu@192.168.43.56</LessonCodeWrapper>\n\n  يتم تنفيذ التعليمات الإضافية عبر SSH على Raspberry Pi نفسه.\n  \n  </li>\n</List>\n</li>\n\n<li>\n\nتثبيت Home Assistant\n\n<List>\n  <li>\n\n  <robo-academy-note type=\"okay\">\n\nقد تكون بعض إصدارات البرامج المعروضة أدناه قديمة. للحصول على أحدث الإصدارات، يمكنك الرجوع إلى [مستودع التثبيت لصورة Robonomics Home Assistant](https://github.com/airalab/Robonomics-HomeAssistant-image/tree/main/robonomics-stage).\n\n  </robo-academy-note>\n\n  قل البدء، قم بتحديث نظام Raspberry Pi وتثبيت الحزم اللازمة. أثناء التثبيت، سترى نافذة تطلب إعادة تشغيل الخدمة. ما عليك سوى اختيار <span class=\"accent\">ok</span> باستخدام زر <code>tab</code> والضغط على enter.\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get update</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get upgrade -y</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>sudo apt-get install -y python3 python3-dev python3-venv python3-pip bluez libffi-dev libssl-dev libjpeg-dev zlib1g-dev autoconf build-essential libopenjp2-7 libtiff5 tzdata libcurl4-openssl-dev subversion libturbojpeg0-dev python3-serial curl</LessonCodeWrapper>\n\n  </li>\n\n  <li>\n  \n  إنشاء مستخدم <code>homeassistant</code> والدليل لـ Home Assistant Core:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo useradd -rm homeassistant -d /srv/homeassistant -G dialout</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n\n  إنشاء بيئة افتراضية لـ Home Assistant Core والتبديل إليها. يجب أن يتم ذلك كمستخدم <code>homeassistant</code>، لذا بعد تنفيذ الأوامر سيبدو مستخدمك مثل <code>(homeassistant) homeassistant@ubuntu</code>:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo -u homeassistant -H -s</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>cd /srv/homeassistant</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>python3 -m venv .</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>source bin/activate</LessonCodeWrapper>\n\n  كنتيجة، ستجد اسم البيئة الافتراضية بين القوسين:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines noCopyIcon>\n(homeassistant) homeassistant@ubuntu:/srv/homeassistant/$\n</LessonCodeWrapper>\n\n  </li>\n\n  <li>\n\n  تثبيت الحزم اللازمة من Python:\n\n  <LessonCodeWrapper language=\"bash\" noLines>python3 -m pip install wheel~=0.37</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>pip3 install sqlalchemy~=1.4 fnvhash~=0.1 aiodiscover==1.4.11</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>pip3 install homeassistant~=2023.3.6 psutil-home-assistant~=0.0</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n  \n  ابدأ Home Assistant Core لأول مرة. سيتم إكمال التثبيت عن طريق إنشاء دليل تكوين <code class=\"nowb\">.homeassistant</code> تلقائيًا في الدليل <code>/home/homeassistant</code>، وتثبيت أي تبعيات أساسية:\n  \n<LessonCodeWrapper language=\"bash\" noLines>hass</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n\n  أثناء تقدم الإعداد الأولي، تحقق من تثبيتك عبر واجهة الويب على <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. في هذا المثال: <code>http://192.168.43.56:8123</code>. يمكنك فتح واجهة مستخدم عبر الويب من أي كمبيوتر متصل بشبكتك المحلية.\n\n  انتظر حتى تحصل على نافذة الترحيب مع إنشاء تسجيل الدخول / كلمة المرور ثم قم بإيقاف Home Assistant باستخدام <code>Ctrl+C</code>.\n  </li>\n</List>\n</li>\n\n<li>\n\nتثبيت IPFS\n\n<List>\n\n  <li>\n\n  لتثبيت IPFS يمكنك استخدام سكريبتنا لتنزيل IPFS وإنشاء خدمة systemd معه. أولاً، اخرج من البيئة الافتراضية لـ Home Assistant:\n\n<LessonCodeWrapper language=\"bash\" noLines>exit</LessonCodeWrapper>\n\n  ثم قم بتنفيذ:\n\n  <LessonCodeWrapper language=\"bash\" noLines>cd ~</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>wget https://raw.githubusercontent.com//airalab/homeassistant-robonomics-integration/main/install_ipfs.sh</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" noLines>sudo chmod +x install_ipfs.sh</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" noLines>./install_ipfs.sh</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n<li>\n\nخدمات Systemd\n\n<List>\n\n<li>\n\nتعتبر خدمة systemd مفيدة لتأمين تشغيل Home Assistant تلقائيًا. قم بإنشاء خدمة جديدة لـ Home Assistant:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo nano /etc/systemd/system/home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nالصق ما يلي\n\n<LessonCodeWrapper language=\"bash\">\n[Unit]\nDescription=Home Assistant\nAfter=network-online.target\n[Service]\nType=simple\nRestart=on-failure\nUser=%i\nWorkingDirectory=/srv/%i/\nExecStart=/srv/homeassistant/bin/hass -c \"/srv/%i/.homeassistant\"\nEnvironment=\"PATH=/srv/%i/bin\"\n[Install]\nWantedBy=multi-user.target\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nقم بتمكين وبدء الخدمة:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl enable home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl start home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n<li>\n\nدمج Robonomics\n\n<List>\n\n<li>\n\nقم بتسجيل الدخول بمستخدم <code>homeassistant</code> على Raspberry Pi الخاص بك:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo -u homeassistant -H -s\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nقم بتنشيط البيئة الافتراضية وتثبيت الحزم البرمجية اللازمة بالبايثون:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsource /srv/homeassistant/bin/activate\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\npip3 install robonomics-interface~=1.6.0\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nثم انتقل إلى الدليل <code>.homeassistant</code>، وأنشئ مجلد <code class=\"nowb\">custom_components</code> وانسخ فيه المستودع مع التكامل:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd ~/.homeassistant\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nmkdir custom_components\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd custom_components\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsvn checkout https://github.com/airalab/homeassistant-robonomics-integration/trunk/custom_components/robonomics\n</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nبعد ذلك، اخرج من مستخدم homeassistant وأعد تشغيل الخدمة:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nexit\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl restart home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n</List>\n\n\n\n","fileInfo":{"path":"ar/learn/smart-home-course/raspberry-pi-setup.md","name":"raspberry-pi-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}