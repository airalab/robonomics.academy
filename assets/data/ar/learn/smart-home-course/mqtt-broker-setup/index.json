{"hash":"8d66541f6e2b7bde6cbd76ed09ec87c40b5569d7","data":{"course":{"id":"9361d5b42903bf95bb4a693c551c8993","title":"الدرس #3، إعداد وتهيئة وسيط MQTT","description":"دورة مساعد المنزل","content":"\n## مقدمة\n\nبعد الانتهاء من تكوين Raspberry Pi، الخطوة التالية هي تثبيت وسيط MQTT على Raspberry Pi. كما ذكر أعلاه، يتولى الوسيط توجيه الرسائل بين عملاء MQTT المختلفين. ستقوم بتثبيت وتكوين Eclipse Mosquitto، وسيط MQTT مفتوح المصدر.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nبالإضافة إلى ذلك، ستكمل إعداد Home Assistant وإضافة تكامل MQTT إليه.\n\n## تعليمات\n\n<List type=\"numbers\">\n\n<li>\n\n\nتثبيت وسيط Mosquitto\n\n<List>\n<li>\n\nقم بتثبيت [وسيط Mosquitto](https://mosquitto.org/) على Raspberry Pi الخاص بك:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nأدخل اسم المستخدم الخاص بك (استخدم أي اسم تريده) وكلمة المرور (سيُطلب منك إدخال كلمة المرور بعد الأمر):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nتحرير ملف التكوين:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nأضف ما يلي إلى الملف:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nاحفظ الملف وأعد تشغيل الخدمة:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nوأخيرًا، تحقق من حالة الوسيط:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nيجب أن ترى شيئًا مثل هذا:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nإعداد Home Assistant و MQTT\n\n<List>\n\n<li>\n\nافتح متصفح الويب وانتقل إلى <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. (بنفس عنوان IP الذي وجدته في الدرس السابق). كن على علم، أن عنوان Raspberry Pi قد يتغير مع مرور الوقت بسبب إعدادات الجهاز التوجيه. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nعلى الصفحة الأولى، أدخل أي اسم، اسم مستخدم، كلمة مرور تريدها وانقر على \"<code>إنشاء حساب</code>\"\n</li>\n\n<li>\n\nثم، قم بإدخال اسم لمنزلك وتحديد موقعك ونظام الوحدات. انقر على \"<code>DETECT</code>\" للعثور على موقعك وتحديد المنطقة الزمنية ونظام الوحدات بناءً على ذلك الموقع. إذا كنت لا ترغب في إرسال موقعك، يمكنك تعيين هذه القيم يدويًا.\n\n</li>\n\n<li>\n\nفي الشاشة التالية، سيعرض Home Assistant أي أجهزة تم اكتشافها على شبكتك. لا تقلق إذا رأيت عددًا أقل من العناصر المعروضة أدناه؛ يمكنك دائمًا إضافة الأجهزة يدويًا لاحقًا. الآن، ما عليك سوى النقر على <code>FINISH</code> وستكون على الشاشة الرئيسية لـ Home Assistant.\n\n</li>\n\n<li>\n\nالآن نحتاج إلى تثبيت تكامل MQTT. اذهب إلى <code>Settings</code> -> <code>Devices & Services.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nاضغط على زر <code>ADD INTEGRATION</code> في الزاوية السفلية اليمنى. في النافذة المفتوحة، ابحث عن <code>MQTT</code>.\n\n</li>\n\n<li>\n\nحدد MQTT وقم بإعداد عنوان الوسيط الخاص بك — <code>localhost</code> والمنفذ — <code>1883</code> واسم المستخدم وكلمة المرور الخاصة بك (نفس تلك التي أنشأتها سابقًا لـ Mosquitto Broker) ثم اضغط على <code>SUBMIT</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"ar/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}