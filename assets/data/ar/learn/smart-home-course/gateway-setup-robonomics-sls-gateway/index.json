{"hash":"66c202d3783d3c594c78856019b23f3916cdea2f","data":{"course":{"id":"36d2cc8afa876f97b4553a4483207943","title":"الدرس #4b، إعداد البوابة: Robonomics SLS Gateway","description":"دورة مساعد المنزل","content":"\n## ما هذا عن\n\nهذا هو إعداد السيناريو لربط الأجهزة باستخدام Robonomics SLS Gateway. استلهمت Robonomics التصميم من البوابة التي طورها مشروع [Smart Logic System](https://github.com/slsys/Gateway) وقامت بتعديل جزء من الدوائر. يمكنك طلب بوابة من Robonomics أو بناء بوابتك الخاصة باستخدام [المخططات الزرقاء](https://oshwlab.com/ludovich88/robonomics_sls_gateway_v01).\n\nستقوم بتثبيت البرنامج المطلوب للبوابة وتكوينه وتوصيله بـ Home Assistant.\n\n<robo-academy-note type=\"note\" title=\"Attention\">\n  برنامج SmartRF Flash Programmer، برنامج لتحديث البرامج الثابتة، يتطلب نظام تشغيل Windows.\n</robo-academy-note>\n\n## تعليمات\n\n<List type=\"numbers\">\n\n<li>\n\nتثبيت برنامج تشغيل متحكم Zigbee\n\n<List>\n\n<li>\n\nأولاً، تحتاج إلى تفليش متحكم البوابة CC2652P. ضع التبديلات <code>ON</code> <code>2</code>، <code>4</code> و <code>7</code> في الجزء السفلي من SLS Gateway، يجب أن تكون الباقي <code>OFF</code>.\n\n<LessonImages src=\"smart-house-course/lesson-4-b-1.png\" alt=\"controllers\"/>\n</li>\n\n<li>\n\nقم بتوصيل البوابة بجهاز الكمبيوتر لخاص بك باستخدام كابل USB-A<>USB-C.\n\n<robo-academy-note type=\"warning\" title=\"WARNING\">\n  يرجى استخدام أنواع الكابلات USB-A<>USB-C فقط، لأن البوابة في الوقت الحالي لا تدعم نوع USB-C<>USB-C.\n</robo-academy-note>\n\n</li>\n\n<li>\n\nيتطلب برنامج تشغيل CC2652 SmartRF Flash Programmer v2 من Texas Instrument. قم بتنزيله من [الموقع الرسمي](https://www.ti.com/tool/download/FLASH-PROGRAMMER-2) ثم قم بتثبيته.\n\n</li>\n\n<li>\n\nقم بتنزيل برنامج التشغيل لمتحكم CC2652P من [مستودع GitHub](https://github.com/egony/cc2652p_cc1352p_RF-STAR/tree/main/firmware/coordinator).\n\n</li>\n\n<li>\n\nقم بتشغيل البرنامج. في نافذة <code>جهاز متصل</code> حدد متحكم CC2652P، ضع المسار إلى البرنامج الثابت، ضع العلامات على <code>Erase, Program, Verify</code> كما في الصورة واضغط على <code>Start</code>.\n\n<LessonImages src=\"smart-house-course/lesson-4-b-2.png\" alt=\"tutorial\" imageClasses=\"mb\"/>\n\nبعد تفليش ناجح، سترى رسالة <code>Success!</code>. الآن يمكنك فصل كابل USB.\n\n</li>\n</List>\n</li>\n\n<li>\n\nتثبيت برنامج تشغيل المتحكم\n\n<List>\n\n<li>\n\nالآن تحتاج إلى إعداد البوابة لتثبيت البرنامج الثابت. ننصحك بتحديث البرنامج الثابت عن طريق توصيل البوابة مباشرة بجهاز Raspberry Pi الخاص بك وإدخال جميع الأوامر التالية على ذلك الجهاز. \n\n</li>\n\n<li>\n\nضع التبديلات <code>ON</code> <code>1</code> و <code>3</code> في الجزء السفلي من بوابة SLS، يجب أن تكون الباقي <code>OFF</code>. ثم قم بتوصيل البوابة بجهاز Raspberry Pi الخاص بك عبر منفذ USB type-C.\n\n<LessonImages src=\"smart-house-course/lesson-4-b-3.gif\" alt=\"tutorial\" imageClasses=\"mb\"/>\n\n</li>\n\n<li>\n\nقم بالاتصال بجهاز Raspberry Pi عبر SSH.\n\n<LessonCodeWrapper language=\"bash\" noLines>\nssh ubuntu@192.168.xxx.xxx\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nانسخ المستودع مع البرنامج الثابت:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\ngit clone https://github.com/airalab/robonomics-hass-utils.git\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nلتفليش بوابة SLS تحتاج إلى تشغيل النصوص <code>Clear</code> و <code>Flash_16mb</code>:\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd robonomics-hass-utils/esp_firmware/linux\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo chmod +x Clear.sh\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo chmod +x Flash_16mb.sh\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\n./Clear.sh\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\n./Flash_16mb.sh\n</LessonCodeWrapper>\n</li>\n\n<li class=\"no-bullet\">\n\n\\- **حل المشكلات**\n\nإذا كنت تواجه مشاكل في تحديث برنامج تشغيل بوابتك، فيجب عليك اتخاذ خطوات إضافية:\n\n<List>\n\n<li>\n\nتأكد من تثبيت وحدة pySerial:\n\n<LessonCodeWrapper language=\"bash\" noLines>\npip install pyserial\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nقم بمنح مستخدمك حق الوصول إلى منفذ USB:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo usermod -a -G dialout $USER\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nفي بعض الحالات، من الضروري تغيير إعداد النطاق الترددي في السيناريو لتحديث البرنامج الثابت. افتح سيناريو <code>Flash_16mb.sh</code> باستخدام محرر النانو وقم بتغيير معلمة الباود من <code>921600</code> إلى قيمة أصغر (على سبيل المثال، <code>115200</code>).\n</li>\n</List>\n</li>\n\n<li class=\"no-bullet\">\n\n\\- **إضافي**\n\nنحن نوفر أيضًا خيارات لتحديث البرنامج الثابت باستخدام أنظمة تشغيل أخرى (macOS و Windows). يمكنك العثور على السيناريوهات المقابلة في مجلد، واسمه يعتمد على نظام التشغيل الخاص بك.\n\n</li>\n</List>\n</li>\n\n<li>\n\nإعداد البوابة\n\n<List>\n\n<li>\n\nقم بتعيين المفاتيح على ظهر البوابة إلى وضعها الجديد. يجب أن تكون المفاتيح <code>5</code> (RX Zigbee to ESP) و <code>6</code> (TX Zigbee to ESP) في وضع <code>ON</code>، ويجب أن تكون الباقي <code>OFF</code>.\n\n\n<LessonImages src=\"smart-house-course/lesson-4-b-4.gif\" alt=\"tutorial\" imageClasses=\"mb\"/>\n\n</li>\n\n<li>\n\nقم بتوصيل كابل الطاقة من نوع C. يجب أن يتحول الضوء المؤشر في الوسط إلى اللون الأخضر.\n\n</li>\n\n<li>\n\nعند بدء التشغيل الأول، ستبدأ البوابة في مشاركة الواي فاي بـ SSID <code>zgw****</code>. قم بالاتصال بهذا الشبكة. تذكر أن الإشارة قد تكون ضعيفة إلى حد ما، لذا من الأفضل أن تبقي بوابة SLS بالقرب من جهاز الكمبيوتر الخاص بك.\n\nإذا كان الاتصال ناجحًا، ستفتح واجهة الويب (أو يمكنك العثور عليها على عنوان 192.168.1.1).\n\n</li>\n\n<li>\n\nانتقل إلى صفحة الواي فاي وقم بإدخال بيانات الواي فاي الخاصة بك عن طريق إدخال اسم المستخدم / كلمة المرور والضغط على زر <code>Save</code>. بعد ذلك، اضغط على زر <code>Reboot</code>. ستقوم البوابة بإعادة التشغيل والاتصال بشبكة الواي فاي الخاصة بك.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmSht6roENzrV6oqsQ1a5gp6GVCz54EDZdPAP8XVh9SCwH', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nابحث عن عنوان IP المحلي لبوابة SLS للوصول إلى واجهة الويب. يمكنك استخدام تطبيق [Fing](https://www.fing.com/products) أو <code>arp -a</code> في الطرفية الخاصة بك أو Nmap: \n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nmap -sP 192.168.xxx.0/24\n</LessonCodeWrapper>\n\nحيث <code class=\"bold\">xxx</code> هو عنوان IP الخاص بك في الشبكة المحلية. يجب أن يكن اسم البوابة مشابهًا لهذا: <code>zgw****</code>. افتح واجهة الويب للبوابة عن طريق لصق عنوان IP البوابة في المتصفح.\n</li>\n\n<li>\n\nانتقل إلى <code>الإعدادات</code> -> <code>الأجهزة</code> وتأكد من أن الإعدادات تبدو كما في الصورة. قم بتصحيح الإعدادات إذا لزم الأمر وانقر على زر <code>حفظ</code>:\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmeSksMxU9xkvvK7f81WDAYULiMFokK7P7KDVYEjv2MHjn', type:'mp4'}]\" />\n\nالجدول بالقيم المطلوبة:\n\n\n| Field        \t         | **Value**          |                                                                     \t\n|------------------------|--------------------|\n| Zigbee module          | TI                 |\n| Zigbee UART RX         | 22                 |\n| Zigbee UART TX         | 23                 |\n| Zigbee RST Pin         | 18                 |\n| Zigbee BSL Pin         | 19                 |\n| Button Mode            | 33 (pullUP - true) |\n| Number addressable leds| 0                  |\n| Led Red (or addr)      | 21                 |\n| Led Green              | 5                  |\n| Led Blue               | 27                 |\n| I2C SDA                | 255                |\n| I2C SCL                | 255                |\n\n</li>\n\n<li>\n\nثم أعد تشغيل البوابة. اختر <code>الإجراءات</code> -> <code>إعادة تشغيل النظام</code> في الزاوية العلوية اليمنى. تأكد من أن البوابة تعمل بشكل صحيح مع متحكم CC2652P في نافذة معلومات Zigbee. يجب أن يكون حالة الجهاز <code>موافق</code>.\n\n</li>\n\n<li>\n\nأعد تشغيل البوابة. اختر <code>الإجراءات</code> -> <code>إعادة تشغيل</code> النظام في الزاوية العلوية اليمنى.\n\n</li>\n\n<li>\n\nقم بتكوين إضافة الأجهزة تلقائيًا إلى Home Assistant. انتقل إلى <code>Zigbee</code> -> <code>التكوين</code> ثم اختر <code>اكتشاف Home Assistant MQTT</code> و <code>مسح الحالات</code>. احفظ التغييرات وأعد تشغيل بوابة SLS مرة أخرى.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmVZMB1xQeB6ZLfSR6aUrN6cRSF296s8CMJt7E2jBJ5MjZ', type:'mp4'}]\" />\n\n</li>\n\n<li class=\"no-bullet\">\n\n\\- **إضافي**:\n\nإذا كان لديك بالفعل بوابة SLS نشطة في منلك، وأنت الآن تكون تكوين بوابة أخرى، فسيتعارضان مع بعضهما البعض. لحل هذه المشكلة، تحتاج إلى تغيير القناة على الجهاز الجديد.\n\nللقيام بذلك، انتقل إلى <code>Zigbee</code> -> <code>التكوين</code> وقم بتغيير القناة إلى أخرى (على سبيل المثال، القناة 15).\n\n</li>\n\n<li>\n\nقم بتوصيل أجهزتك عن طريق الانتقال إلى <code>Zigbee</code> -> <code>الانضمام</code>. ضع أجهزتك في وضع الإقران، الطريقة الأكثر شيوعًا لتبديل جهاز إلى وضع الاتصال هي الاستمرار في الضغط على زر الطاقة أو تشغيلها/إيقافها لمدة 5 مرات. اضغط على زر <code>تمكين الانضمام</code> لبدء البحث عن أجهزة Zigbee. سترى أجهزة الاستشعار النشطة.\n\n</li>\n</List>\n</li>\n\n<li>\n\nربط بوابة SLS بـ Home Assistant\n\n<List>\n\n<li>\n\nتحتاج إلى تكوين MQTT على بوابة SLS. عد إلى واجهة الويب الخاصة ببوابة SLS الخاصة بك وانتقل إلى <code>الإعدادات</code> -> <code>الرابط</code> -> <code>إعداد MQTT</code>.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmdNKDqwwy87VQEDDVsX5kpaDQm9wKKPEJUNJnhnjx6e5y', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nأضف عنوان الوسيط الخاص بك (عنوان Raspberry Pi مع Home Assistant في الشبكة المحلية، يمكنك العثور عليه باستخدام تطبيق [Fing](https://www.fing.com/products) أو باستخدام أمر <code>ip -a</code> على RPi الخاص بك)، والمنفذ (الافتراضي هو 1883) واسم مستخدم الوسيط وكلمة المرور (التي قمت بإنشائها سابقًا) واسم الموضوع (يمكنك اختيار أي). كما يجب أن يكون عنوان IP المحلي لـ Raspberry Pi ثابتًا.\n\nلا تنسى النقر على <code>تمكين</code> و <code>الاحتفاظ بالحالات</code>.\n\n</li>\n\n<li>\n\nاحفظ التغييرات. الآن ستظهر الأجهزة تلقائيًا في Home Assistant.\n\n</li>\n</List>\n\n</li>\n\n<li>\n\nتوصيل الأجهزة \n\n<List>\n\n<li>\n\nقم بتوصيل أجهزتك عن طريق الانتقال إلى <code>Zigbee</code> -> <code>الانضمام</code>. ضع أجهزتك في وضع الإقران، الطريقة الأكثر شيوعًا لتبديل جهاز إلى وضع الاتصال هي الاستمرار في الضغط على زر الطاقة أو تشغيلها/إيقافها لمدة 5 مرات.\n\n<LessonImages src=\"smart-house-course/lesson-4-a-4.gif\" alt=\"tutorial\" imageClasses=\"mb\"/>\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/Qmdq3PBNY88QbYYqakwSLG2vn3mVUom3w3wsSWfTd1pzJA', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nاضغط على زر تمكين الانضمام لبدء البحث عن أجهزة Zigbee. سترى أجهزة الاستشعار النشطة.\n\n</li>\n\n</List>\n</li>\n\n</List>","fileInfo":{"path":"ar/learn/smart-home-course/gateway-setup-robonomics-sls-gateway.md","name":"gateway-setup-robonomics-sls-gateway"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 16:16:20 GMT+0400 (Samara Standard Time)"}},"context":{}}