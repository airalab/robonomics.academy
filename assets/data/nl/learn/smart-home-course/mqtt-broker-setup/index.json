{"hash":"39646b78023bddea786f995e516360c6cbdb9af0","data":{"course":{"id":"43ba53bc6730d2d2c80d7f1649b51ee5","title":"Les #3, MQTT Broker Setup en Hass Init","description":"thuiscursus assistent","content":"\n## Intro\n\nNa het voltooien van de configuratie van de Raspberry Pi, is de volgende stap het installeren van de MQTT Broker op de Raspberry Pi. Zoals hierboven vermeld, is de Broker verantwoordelijk voor het routeren van berichten tussen verschillende MQTT-clients. U zult Eclipse Mosquitto, een open source MQTT-broker, installeren en configureren.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nBovendien zult u de Home Assistant-setup voltooien en MQTT-integratie eraan toevoegen.\n\n## Instructies\n\n<List type=\"numbers\">\n\n<li>\n\n\nMosquitto Broker Installatie\n\n<List>\n<li>\n\nInstalleer [Mosquitto Broker](https://mosquitto.org/) op uw Raspberry Pi:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nVoer UW_GEBRUIKERSNAAM in (gebruik degene die u wilt) en wachtwoord in (u wordt gevraagd het wachtwoord in te voeren na het commando):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nBewerk het configuratiebestand:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nVoeg het volgende toe aan het bestand:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nSla het bestand op en herstart de service:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nControleer tot slot de status van de broker:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nU zou iets als dit moeten zien:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nHome Assistant en MQTT instellen\n\n<List>\n\n<li>\n\nOpen de webbrowser en ga naar <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. (met hetzelfde IP-adres dat u in de vorige les heeft gevonden). Wees ervan bewust dat het adres van de Raspberry Pi in de loop van de tijd kan veranderen als gevolg van routerinstellingen. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nVoer op de eerste pagina een willekeurige naam, gebruikersnaam, wachtwoord in en klik op \"<code>ACCOUNT AANMAKEN</code>\"\n</li>\n\n<li>\n\nVul vervolgens een naam in voor je huis en stel je locatie en eenheidssysteem in. Klik op \"<code>DETECT</code>\" om je locatie te vinden en je tijdzone en eenheidssysteem op basis van die locatie in te stellen. Als je liever je locatie niet wilt delen, kun je deze waarden handmatig instellen.\n\n</li>\n\n<li>\n\nOp het volgende scherm laat Home Assistant alle apparaten zien die het op je netwerk heeft ontdekt. Maak je geen zorgen als je minder items ziet dan hieronder wordt getoond; je kunt altijd later handmatig apparaten toevoegen. Klik nu gewoon op <code>FINISH</code> en je komt op het hoofdscherm van Home Assistant terecht.\n\n</li>\n\n<li>\n\nNu moeten we een MQTT-integratie installeren. Ga naar <code>Instellingen</code> -> <code>Apparaten & Services.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nDruk op de knop <code>INTEGRATIE TOEVOEGEN</code> rechtsonder in de hoek. Zoek in het geopende venster naar <code>MQTT</code>.\n\n</li>\n\n<li>\n\nSelecteer MQTT en stel je brokeradres in — <code>localhost</code> poort — <code>1883</code> en je gebruikersnaam en wachtwoord (dezelfde die je eerder hebt aangemaakt voor de Mosquitto Broker) en druk vervolgens op <code>SUBMIT</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"nl/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}