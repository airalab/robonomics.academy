{"hash":"f0f5c02be608963a98931b1ff3d7b952f1efb26f","data":{"course":{"id":"355561b312598b337fa22ffaa0a9d146","title":"Les #2, Raspberry Pi Setup","description":"thuiscursus assistent","content":"\n## Intro\n\nIn deze les zul je je Raspberry Pi voorbereiden om een IoT-hub te worden. Je zult alle benodigde componenten sequentieel installeren en configureren, namelijk:\n\n<List>\n\n- Ubuntu Linux distributie voor Raspberry Pi als server besturingssysteem;\n- Home Assistant pakketten;\n- IPFS pakketten;\n- robonomics-interface bibliotheek.\n\n</List>\n\n## Instructies\n\n<List type=\"numbers\">\n\n<li>\n\nVoorbereiden en configureren van de Raspberry Pi\n\n<List>\n\n  <li>\n\n  Download de afbeelding van [64-bit Ubuntu Server 22.04 LTS](https://ubuntu.com/download/raspberry-pi) of nieuwer voor Raspberry Pi.\n  </li>\n\n  <li>\n\n  Download en installeer een tool voor het schrijven van afbeeldingsbestanden genaamd [Raspberry Pi Imager](https://www.raspberrypi.com/software/) op je computer.\n  </li>\n\n  <li>\n\n  Plaats de SD-kaart en start de Raspberry Pi Imager. Selecteer de vereiste afbeelding (die je zojuist hebt gedownload) als het besturingssysteem en zorg ervoor dat je je SD-kaart selecteert uit het opslagkeuzemenu.\n\n  </li>\n\n  <li>\n\n  Open instellingen en vink de optie <code>SSH inschakelen</code> aan met de parameter <code>Gebruik wachtwoordverificatie</code>.\n\n  \\- Voeg in <code>Gebruikersnaam en wachtwoord instellen</code> gebruikersnaam en wachtwoord toe voor je Raspberry Pi-gebruiker.\n\n  \\- Bij <code>Draadloos LAN configureren</code> geef je je Wi-Fi met het wachtwoord en kies je je land uit de keuzelijst. Klik vervolgens op <code>Schrijven</code> afbeelding.\n\n  <robo-academy-note type=\"okay\">\n  Zorg ervoor dat je daadwerkelijke Wi-Fi naam en je Wi-Fi wachtwoord invoert.\n  </robo-academy-note>\n\n  <LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmY3mEGvUNDT9bKhVhR21JY8RaWp3CB8JNAX1VDHMnwjxw', type:'mp4'}]\" />\n\n  </li>\n\n  <li>\n\n  Wacht tot het schrijven is voltooid, plaats dan de SD-kaart in de Raspberry Pi en zet hem aan. Het zou verbinding moeten maken met je Wi-Fi-netwerk, wat enige tijd zal duren.\n\n  </li>\n  \n  <li>\n\n  Nu moet je het adres van het apparaat vinden. Hiervoor kun je verschillende methoden voor netwerkscannen gebruiken, zoals [Fing App](https://www.fing.com/products), <code>arp -a</code> commando of [nmap](https://nmap.org/download.html). De laatste zal hierna worden gebruikt.\n\n  Installeer nmap met een commando\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get install nmap</LessonCodeWrapper>\n\n  Vind vervolgens uw adres in uw lokale netwerk. Het zou eruit moeten zien als <code>192.168.xxx.xxx</code> of <code>172.xxx.xxx.xxx.</code> Let op, want nmap kan veel adressen op uw lokale netwerk vinden.\n\n  <LessonCodeWrapper language=\"bash\" noLines>ip a</LessonCodeWrapper>\n\n  Scan vervolgens uw netwerk zoals hieronder weergegeven en vervang het laatste octet van het adres door <code>0</code>:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo nmap -sP 192.168.xxx.0/24</LessonCodeWrapper>\n\n  De uitvoer van het commando zal er ongeveer zo uitzien:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noCopyIcon noLines>\nStarting Nmap 7.80 ( https://nmap.org ) at 2020-06-26 13:50 CEST\nNmap scan report for _gateway (192.168.43.1)\nHost is up (0.015s latency).\nMAC Address: 8E:F5:A3:DB:02:24 (Unknown)\nNmap scan report for ubuntu (192.168.43.56)\nHost is up (0.049s latency).\nMAC Address: DC:A6:32:04:45:50 (Raspberry Pi Trading)\nNmap scan report for LAPTOP-NO7 (192.168.43.234)\nHost is up (0.00057s latency).\nMAC Address: 7C:B3:7D:9E:94:DA (Intel Corporate)\nNmap scan report for ed-vm (192.168.43.138)\nHost is up.\nNmap done: 256 IP addresses (4 hosts up) scanned in 2.07 seconds\n</LessonCodeWrapper>\n\n  In dit voorbeeld is het adres <code>192.168.43.56.</code>\n\n  </li>\n\n  <li>\n\n  Verbind met de Raspberry Pi via SSH met het gevonden IP-adres. Gebruik de gebruikersnaam en wachtwoord die u eerder heeft aangemaakt.\n  \n  <LessonCodeWrapper language=\"bash\" noLines>ssh ubuntu@192.168.43.56</LessonCodeWrapper>\n\n  Verdere instructies worden uitgevoerd via SSH op de Raspberry Pi zelf.\n  \n  </li>\n</List>\n</li>\n\n<li>\n\nHome Assistant installatie\n\n<List>\n  <li>\n\n  <robo-academy-note type=\"okay\">\n\nSommige hieronder getoonde softwareversies kunnen verouderd zijn. Voor de nieuwste versies kunt u verwijzen naar het [installatierepository voor Robonomics Home Assistant image](https://github.com/airalab/Robonomics-HomeAssistant-image/tree/main/robonomics-stage).\n\n  </robo-academy-note>\n\n  Voordat u begint, update het Raspberry Pi-systeem en installeer de benodigde pakketten. Tijdens de installatie ziet u een venster met een verzoek tot herstart van de service. Kies gewoon <span class=\"accent\">ok</span> met de <code>tab</code>-knop en druk op enter.\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get update</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get upgrade -y</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>sudo apt-get install -y python3 python3-dev python3-venv python3-pip bluez libffi-dev libssl-dev libjpeg-dev zlib1g-dev autoconf build-essential libopenjp2-7 libtiff5 tzdata libcurl4-openssl-dev subversion libturbojpeg0-dev python3-serial curl</LessonCodeWrapper>\n\n  </li>\n\n  <li>\n  \n  Maak gebruiker <code>homeassistant</code> en de map voor Home Assistant Core aan:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo useradd -rm homeassistant -d /srv/homeassistant -G dialout</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n\n  Maak een virtuele omgeving aan voor Home Assistant Core en schakel hier naar over. Dit moet worden gedaan als de gebruiker <code>homeassistant</code>, dus na het uitvoeren van de commando's zal uw gebruiker eruit zien als <code>(homeassistant) homeassistant@ubuntu</code>:\n\n  <LessonCodeWrapper language=\"bash\" noLines>sudo -u homeassistant -H -s</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>cd /srv/homeassistant</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>python3 -m venv .</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>source bin/activate</LessonCodeWrapper>\n\n  Als resultaat vindt u een naam van de virtuele omgeving tussen haakjes:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines noCopyIcon>\n(homeassistant) homeassistant@ubuntu:/srv/homeassistant/$\n</LessonCodeWrapper>\n\n  </li>\n\n  <li>\n\n  Installeer vereiste Python-pakketten:\n\n  <LessonCodeWrapper language=\"bash\" noLines>python3 -m pip install wheel~=0.37</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>pip3 install sqlalchemy~=1.4 fnvhash~=0.1 aiodiscover==1.4.11</LessonCodeWrapper>\n\n  <LessonCodeWrapper language=\"bash\" noLines>pip3 install homeassistant~=2023.3.6 psutil-home-assistant~=0.0</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n  \n  Start Home Assistant Core voor de eerste keer. Dit zal de installatie voltooien door automatisch de <code class=\"nowb\">.homeassistant</code> configuratiemap aan te maken in de <code>/home/homeassistant</code> map, en het installeren van eventuele basisafhankelijkheden:\n  \n<LessonCodeWrapper language=\"bash\" noLines>hass</LessonCodeWrapper>\n  \n  </li>\n\n  <li>\n\n  Terwijl de initiÃ«le setup bezig is, controleer je installatie via de webinterface op <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. In dit voorbeeld: <code>http://192.168.43.56:8123</code>. Je kunt een web-UI openen vanaf elke computer die is verbonden met je lokale netwerk.\n\n  Wacht tot je het welkomstvenster met inloggen / wachtwoordcreatie krijgt en stop dan Home Assistant met <code>Ctrl+C</code>.\n  </li>\n</List>\n</li>\n\n<li>\n\nIPFS Installatie\n\n<List>\n\n  <li>\n\n  Voor IPFS installatie kun je onze script gebruiken om IPFS te downloaden en een systemd-service mee te maken. Verlaat eerst de virtuele omgeving voor Home Assistant:\n\n<LessonCodeWrapper language=\"bash\" noLines>exit</LessonCodeWrapper>\n\n  Voer vervolgens uit:\n\n  <LessonCodeWrapper language=\"bash\" noLines>cd ~</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>wget https://raw.githubusercontent.com//airalab/homeassistant-robonomics-integration/main/install_ipfs.sh</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" noLines>sudo chmod +x install_ipfs.sh</LessonCodeWrapper>\n  <LessonCodeWrapper language=\"bash\" noLines>./install_ipfs.sh</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n<li>\n\nSystemd Services\n\n<List>\n\n<li>\n\nSystemd-service is handig voor het automatiseren van de lancering van Home Assistant. Maak een nieuwe service voor Home Assistant aan:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo nano /etc/systemd/system/home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nPlak het volgende\n\n<LessonCodeWrapper language=\"bash\">\n[Unit]\nDescription=Home Assistant\nAfter=network-online.target\n[Service]\nType=simple\nRestart=on-failure\nUser=%i\nWorkingDirectory=/srv/%i/\nExecStart=/srv/homeassistant/bin/hass -c \"/srv/%i/.homeassistant\"\nEnvironment=\"PATH=/srv/%i/bin\"\n[Install]\nWantedBy=multi-user.target\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nActiveer en start de service:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl enable home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl start home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n<li>\n\nRobonomics Integratie\n\n<List>\n\n<li>\n\nLog in met de gebruiker <code>homeassistant</code> op je Raspberry Pi:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo -u homeassistant -H -s\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nActiveer de virtuele omgeving en installeer de vereiste Python-pakketten:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsource /srv/homeassistant/bin/activate\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\npip3 install robonomics-interface~=1.6.0\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nGa vervolgens naar de <code>.homeassistant</code> map, maak de map <code class=\"nowb\">custom_components</code> aan en kloon daar de repository met de integratie:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd ~/.homeassistant\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nmkdir custom_components\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd custom_components\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsvn checkout https://github.com/airalab/homeassistant-robonomics-integration/trunk/custom_components/robonomics\n</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nVerlaat daarna de homeassistant gebruiker en herstart de service:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nexit\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nsudo systemctl restart home-assistant@homeassistant.service\n</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n\n</List>\n\n\n\n","fileInfo":{"path":"nl/learn/smart-home-course/raspberry-pi-setup.md","name":"raspberry-pi-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}