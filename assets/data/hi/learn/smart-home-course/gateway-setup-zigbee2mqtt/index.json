{"hash":"e50547559725c4fc529dc0dde8b82acc1396ec58","data":{"course":{"id":"670083c863b109ecb8af2b426bb2dabc","title":"सबक #4a, गेटवे सेटअप: Zigbee2MQTT","description":"होम असिस्टेंट कोर्स","content":"\n## परिचय\n\nयह एक स्थिति सेटअप है जिसमें डिवाइस कनेक्ट करने के लिए Zigbee एडाप्टर और Zigbee2MQTT ब्रिज का उपयोग किया जाता है। यदि आपके पास [JetHome USB JetStick Z2](https://jethome.ru/z2/?sl=en) है (जिसमें सभी आवश्यक फर्मवेयर है), तो आप सीधे इन निर्देशों के साथ आगे बढ़ सकते हैं। हालांकि, यदि आपके पास कोई अन्य एडाप्टर है, तो पहली बात जो आपको करनी है वह है Zigbee2MQTT सॉफ़्टवेयर को फ्लैश करना। आप अपने डिवाइस के लिए निर्देश [यहाँ](https://www.zigbee2mqtt.io/guide/adapters/) पा सकते हैं।\n\nआपको अपने डोमेन को टेस्ट करने के लिए एक स्मार्ट डिवाइस भी चाहिए होगा।\n\n\n## निर्देश\n\n<List type=\"numbers\">\n\n<li>\n\nसॉफ़्टवेयर इंस्टॉल\n\n<List>\n\n  <li>\n    नोड.जेएस रटाइम वातावरण रिपॉजिटरी सेटअप करें और आवश्यक डिपेंडेंसी के साथ इंस्टॉल करें:\n    <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>sudo curl -fsSL https://deb.nodesource.com/setup_16.x | sudo -E bash - </LessonCodeWrapper>\n    <LessonCodeWrapper language=\"bash\" noLines>sudo apt-get install -y nodejs git make g++ gcc</LessonCodeWrapper>\n\n  </li>\n\n  <li>\n    सुनिश्चित करें कि सही संस्करणों का नोड.जेएस (v14.X, V16.x, V17.x या V18.X) और पैकेज मैनेजर <code class=\"nowb\">npm</code> (6.X, 7.X या 8.X) जो नोड.जेएस के साथ स्वचालित रूप से इंस्टॉल हो गया है, वह इंस्टॉल हो गया है:\n    <LessonCodeWrapper language=\"bash\" noLines>node --version</LessonCodeWrapper>\n    <LessonCodeWrapper language=\"bash\" noLines>npm --version</LessonCodeWrapper>\n  </li>\n\n  <li>\n    Zigbee2MQTT के लिए एक निर्देशिका बनाएं और इसे अपने उपयोगकर्ता को मालिक बनाएं:\n    <LessonCodeWrapper language=\"bash\" noLines>sudo mkdir /opt/zigbee2mqtt</LessonCodeWrapper>\n    <LessonCodeWrapper language=\"bash\" noLines>sudo chown -R ${USER}: /opt/zigbee2mqtt</LessonCodeWrapper>\n  </li>\n\n  <li>\n    Zigbee2MQTT रिपॉजिटरी क्लोन करें:\n    <LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\n    git clone --depth 1 --branch 1.28.4 https://github.com/Koenkk/zigbee2mqtt.git /opt/zigbee2mqtt\n    </LessonCodeWrapper>\n  </li>\n\n  <li>\n    डिपेंडेंसी इंस्टॉल करें। ध्यान दें कि <code>npm ci</code> कुछ चेतावनी प्रदान कर सकता है जिन्हें नजरअंदाज किया जा सकता है।\n    <LessonCodeWrapper language=\"bash\" noLines>cd /opt/zigbee2mqtt</LessonCodeWrapper>\n    <LessonCodeWrapper language=\"bash\" noLines>npm ci</LessonCodeWrapper>\n  </li>\n\n</List>\n</li>\n\n<li>\n\nएडाप्र कनेक्ट करना और कॉन्फ़िगर करना\n\n<List>\n\n<li>\n\nZigbee एडाप्टर को Raspberry Pi से कनेक्ट करें। फिर आपको स्टिक की स्थान पता करना होगा। इसके लिए अगले कमांड में टाइप करें:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nls -l /dev/serial/by-id\n</LessonCodeWrapper>\n\nआउटपुट इस तरह दिखना चाहिए:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noCopyIcon>\nubuntu@ubuntu:~$ ls -l /dev/serial/by-id\ntotal 0\nlrwxrwxrwx 1 root root 13 Oct 10 01:44 usb-Silicon_Labs_CP2102_USB_to_UART_Bridge_Controller_0001-if00-port0 -> ../../ttyUSB0\n</LessonCodeWrapper>\n\nइस उदाहरण में स्टिक कनेक्शन डायरेक्टरी <code>ttyUSB0</code> है।\n</li>\n\n<li>\n\nZigbee2MQTT शुरू करने से पहले <code>configuration.yaml</code> फ़ाइल को संपादित करें:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nnano /opt/zigbee2mqtt/data/configuration.yaml\n</LessonCodeWrapper>\n\nमूल कॉन्फ़िगरेशन में कुछ समायोजन की आवश्यकता है। निम्नलिखित कथनों को बदलें:\n\n\\- <code>homeassistant:</code> <code>true</code> पर बदलें, यह स्वचालित रूप से सेंसर्स को होम असिस्टेंट से कनेक्ट करेगा;\n\n\\- <code>mqtt</code> के तहत <code>user</code> और <code>password</code> को अनकमेंट करें और अपने उपयोगकर्ता नाम और पासवर्ड दर्ज करें (एक स्ट्रिंग के रूप में, उदाहरण के रूप में, MQTT ब्रोकर से कोट्स के साथ);\n\n\\- <code>serial</code> -> <code>port</code> में स्टिक कनेक्शन डायरेक्टरी में पोर्ट बदलें। इस उदाहरण में: <code>/dev/ttyUSB0</code>।\n\nसमायोजित कॉन्फ़िगरेशन फ़ाइल इस तरह दिखनी चाहिए:\n\n<LessonCodeWrapper language=\"yaml\">\n# Home Assistant integration (MQTT discovery)\nhomeassistant: true\n# allow new devices to join\npermit_join: true\n# MQTT settings\nmqtt:\n  # MQTT base topic for zigbee2mqtt MQTT messages\n  base_topic: zigbee2mqtt\n  # MQTT server URL\n  server: 'mqtt://localhost'\n  # MQTT server authentication, uncomment if required:\n  user: 'YOUR_USERNAME'\n  password: 'YOUR_PASSWORD'\n# Serial settings\nserial:\n  # Location of CC2531 USB sniffer\n  port: /dev/YOUR_PORT\n</LessonCodeWrapper>\n\n\n**अतिरिक्त:**\n\nयदि आपके घर में पहले से ही एक सक्रिय Zigbee एडाप्टर या गेटवे है, और अब आप एक और स्टिक कॉन्फ़िगर कर रहे हैं, तो वे एक दूसरे के साथ टकराएंगे। इस समस्या को हल करने के लिए आपको नए उपकरण पर चैनल बदलने की आवश्यकता है। इसके लिए कॉन्फ़िगरेशन फ़ाइल के अंत में निम्नलिखित स्ट्रिंग्स जोड़ें:\n\n\n<LessonCodeWrapper language=\"yaml\" codeClass=\"big-code\">\nadvanced:\n  # Optional: ZigBee channel, changing requires re-pairing of all devices. (Note: use a ZLL channel: 11, 15, 20, or 25 to avoid Problems)\n  # (default: 11)\n  channel: 15\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nZigbee2MQTT शुरू करें:\n\n<LessonCodeWrapper language=\"bash\" noLines>\ncd /opt/zigbee2mqtt\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nnpm start\n</LessonCodeWrapper>\n\nसफलतापूर्वक शुरू होने पर, आपको कुछ इस तरह कुछ दिखाई देगा:\n\n<LessonImages src=\"smart-house-course/lesson-4-a-1.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nपेयरिंग डिवाइस\n\n<List>\n\n<li>\n\nअब आपके स्मार्ट डिवाइस को कनेक्ट करने का समय है। एक डिवाइस को कनेक्ट मोड में स्विच करने का सबसे सामान्य तरीका उसके पावर बटन को पकड़ना है या उन्हें 5 बार ऑन/ऑफ करना है। सुनिश्चित करें कि Zigbee2MQTT चल रहा है।\n\n<LessonImages src=\"smart-house-course/lesson-4-a-4.gif\" alt=\"code\" imageClasses=\"mb\"/>\n\nजब डिाइस कनेक्ट होता है, तो आपको एक संदेश दिखाई देना चाहिए:\n\n<LessonCodeWrapper language=\"bash\" codeClass=\"big-code\" noLines>\nZigbee2MQTT:info  2022-07-29 14:44:39: Successfully interviewed '0x00158d0003eeeacf', device has successfully been paired\n</LessonCodeWrapper>\n\nसेंसर की आईडी को याद रखें: इस उदाहरण में — <code>0x00158d0003eeeacf</code>।\n\nअब आपको इस सेंसर को आईडी के साथ अपने होम असिस्टेंट वेबयूआई में देखना चाहिए। <code>सेटिंग</code> -> <code>डिवाइस और सेवाएं</code> -> <code>डिवाइस</code> पर जाएं और इसे चेक करें:\n\n<LessonImages src=\"smart-house-course/lesson-4-a-2.jpg\" alt=\"code\" imageClasses=\"mb\"/>\n\nसभी सेंसर जोड़ने के बाद, आप <code>Ctrl+C</code> के साथ प्रोग्राम को रोक सकते हैं। अगर आप और कोई डिवाइस जोड़ना नहीं चाहते हैं, तो आप कॉन्फ़िगरेशन फ़ाइल को फिर से खोलकर <code>permit_join:</code> को <code>false</code> पर सेट कर सकते हैं।\n</li>\n\n</List>\n</li>\n\n<li>\n\nऑटोस्टार्ट के लिए सेवा बनाना\n\n<List>\n\n<li>\n\nअब आपको एक सेवा बनानी है। फ़ाइल बनाएं:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/systemd/system/zigbee2mqtt.service\n</LessonCodeWrapper>\n\nस फ़ाइल में निम्नलिखित को जोड़ें और <code>YOUR_RASPPI_USERNAME_HERE</code> को बदलें। अगर आप अपना उपयोगकर्ता नाम नहीं जानते हैं, तो <code>whoami</code> कमांड का उपयोग करें।\n\n<LessonCodeWrapper language=\"bash\">\n[Unit]\nDescription=zigbee2mqtt\nAfter=network.target \n[Service]\nExecStart=/usr/bin/npm start\nWorkingDirectory=/opt/zigbee2mqtt\nStandardOutput=inherit\nStandardError=inherit\nRestart=always\nUser=YOUR_RASPPI_USERNAME_HERE\n[Install]\nWantedBy=multi-user.target\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nकॉन्फ़िगरेशन काम करता है या नहीं यह सत्यापित करें:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl start zigbee2mqtt\n</LessonCodeWrapper>\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status zigbee2mqtt.service\n</LessonCodeWrapper>\n\nआउटपुट इस तरह दिखना चाहिए:\n\n<LessonImages src=\"smart-house-course/lesson-4-a-3.jpg\" alt=\"code\" imageClasses=\"mb\"/>\n</li>\n\n<li>\n\nZigbee2MQTT को बूट पर स्वचालित रूप से शुरू करने के लिए सेवा को सक्षम करें:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl enable zigbee2mqtt.service\n</LessonCodeWrapper>\n\n</li>\n</List>\n</li>\n</List>","fileInfo":{"path":"hi/learn/smart-home-course/gateway-setup-zigbee2mqtt.md","name":"gateway-setup-zigbee2mqtt"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 04 2023 12:54:33 GMT+0400 (Samara Standard Time)"}},"context":{}}