{"hash":"cc71bf47aafce049dec68b910ec43100bf99e437","data":{"course":{"id":"c726999f63c3b9f10584d1162b4134a7","title":"Lição #3, Configuração do Broker MQTT e Inicialização do Hass","description":"curso de assistente doméstico","content":"\n## Introdução\n\nApós terminar a configuração do Raspberry Pi, o próximo passo é instalar o Broker MQTT no Raspberry Pi. Como mencionado anteriormente, o Broker é responsável pelo roteamento de mensagens entre diferentes clientes MQTT. Você irá instalar e configurar o Eclipse Mosquitto, um Broker MQTT de código aberto.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nAlém disso, você irá completar a configuração do Home Assistant e adicionar integração MQTT a ele.\n\n## Instruções\n\n<List type=\"numbers\">\n\n<li>\n\n\nInstalação do Broker Mosquitto\n\n<List>\n<li>\n\nInstale [Mosquitto Broker](https://mosquitto.org/) no seu Raspberry Pi:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nDigite SEU_NOME_DE_USUÁRIO (use o que quiser) e senha (você será solicitado a inserir a senha após o comando):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nEdite o arquivo de configuração:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nAdicione o seguinte ao arquivo:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nSalve o arquivo e reinicie o serviço:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nPor fim, verifique o status do broker:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nVocê deverá ver algo como isso:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nConfigurando o Home Assistant e MQTT\n\n<List>\n\n<li>\n\nAbra o navegador da web e vá para <code>http://%ENDEREÇO_IP_DO_RASPBERRY%:8123</code>. (com o mesmo endereço IP que você encontrou na lição anterior). Esteja ciente de que o endereço do Raspberry Pi pode mudar com o tempo devido às configurações do roteador. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nNa primeira página, insira qualquer nome, nome de usuário, senha que desejar e clique em \"<code>CRIAR CONTA</code>\"\n</li>\n\n<li>\n\nEm seguida, insira um nome para sua casa e defina sua localização e sistema de unidades. Clique em \"<code>DETECT</code>\" para encontrar sua localização e definir seu fuso horário e sistema de unidades com base nessa localização. Se preferir não enviar sua localização, você pode definir esses valores manualmente.\n\n</li>\n\n<li>\n\nNa próxima tela, o Home Assistant mostrará quaisquer dispositivos que ele descobriu em sua rede. Não se preocupe se você ver menos itens do que o mostrado abaixo; você sempre pode adicionar dispositivos manualmente mais tarde. Por enquanto, apenas clique em <code>FINISH</code> e você estará na tela principal do Home Assistant.\n\n</li>\n\n<li>\n\nAgora precisamos instalar uma integração MQTT. Vá para <code>Settings</code> -> <code>Devices & Services.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nPressione o botão <code>ADD INTEGRATION</code> no canto inferior direito. Na janela aberta, encontre <code>MQTT</code>.\n\n</li>\n\n<li>\n\nSelecione MQTT e configure o endereço do seu broker — <code>localhost</code> porta — <code>1883</code> e seu nome de usuário e senha (o mesmo que você criou anteriormente para o Mosquitto Broker) e então pressione <code>SUBMIT</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"pt/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}