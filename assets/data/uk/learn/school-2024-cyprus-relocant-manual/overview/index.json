{"hash":"8ef03bb5d0758af9cf9521a2138c5ca6b002a78d","data":{"course":{"id":"ba8579340286328d1300fb12624e9939","title":"Robonomics School 2024 / Кіпр Relocant Manual: Розумний дім","description":"Кіпр Relocant Manual: Розумний дім","content":"\n<LessonImages imageClasses=\"mb\"  src='school-2024-cyprus-relocant-manual/Setup_SmartHome-Academy.jpg' alt=\"Cyprus Relocant Manual Cover\" />\n\nЗміна країни проживання завжди приносить не лише нові можливості, але й виклики. Так склалося, що в моєму випадку новою країною став Кіпр, куди я приїхав будувати компанію. Протягом останніх 10 років до переїзду я жив у великому місті, де звик до певних переваг у вигляді центрального опалення від міста, гарячого водопостачання та дешевої електроенергії. На Кіпрі кожний будинок і кожна квартира набагато більш автономні у плані забезпечення життєвого комфорту, але турбота про підтримку комфортного життя лежить на власнику. Візьмемо, наприклад, гарячу воду. У холодні місяці вам доведеться самостійно включати бойле��, щоб його підігріти. Також квартиру потрібно обігрівати самостійно. Взимку ми вмикаємо/вимикаємо теплову ковдру та бойлер, а влітку кондиціонер та відлякувач від комарів. Це потребує не лише часу та енергії, але й грошей.\n\nМій перший зимовий період на Кіпрі призвів до астрономічних рахунків за електроенергію. Це був серйозний удар по моєму бюджету. Один з можливих варіантів рішення: змінити свої звички та адаптуватися до нових умов. Але після переїзду у вас вже буде досить турбот. Як інженер, я почав шукати рішення, які допоможуть мені контролювати витрати та зробити моє життя більш комфортним, і я хочу поділитися своїм досвідом з вами.\n\n## Вибір обладнання\n\nПерше, з чого я хочу почати, це вибір екосистеми. Проводові системи відразу відпадають, оскільки вони вимагають великих бюджетів та серйозного втручання в інфраструктуру квартири/будинку. З бездротових пристроїв існує велика кількість пристроїв під брендами Sonoff та Tyua, але всі вони працюють через Інтернет, який не завжди працює надійно на острові. Це не кажучи вже про питання конфіденційності та безпеки ваших особистих даних на серверах інших компаній. Я рекомендую будувати свій розумний дім з [Home Assistant](https://www.home-assistant.io) як основний домашній сервер. Переваги: може працювати без доступу до зовнішнього Інтернету; можливо взяти його з собою при переїзді та розгорнути в новому місці без втрати налаштувань; підтримує велику кількість пристроїв, включаючи смарт-телевізори, пилососи та багато іншого.\n\nНайпопулярніші протоколи для бездротового підключення пристроїв - це Wi-Fi, Zigbee, Bluetooth. У одній квартирі можна знайти одразу всі три типи підключень, але щодо пристроїв, які роблять розумні речі звичайними, зручніше працювати з протоколом Zigbee. У цьому випадку нам не потрібно турбуватися про їх адреси та зону покриття, плюс вони можуть працювати від батарейок. Пристрої Wi-Fi потребують постійного підключення до живлення та залежать від сили сигналу Wi-Fi. Навіть у невеликій квартирі, де є пара стін між роутером та вашою спальнею, іноді доводиться встановлювати Wi-Fi Extender. У випадку з Zigbee, самі пристрої діють як ретранслятори.\n\nПовертаючись на Кіпр, мій мінімальний набір пристроїв виявився наступним:\n\n## Комп'ютер - Домашній сервер\n\nОстаточне завдання для сервера - обслуговувати розумний будинок, керований Home Assistant. Найлегший спосіб - взяти вже попередньо налаштований [Home Assistant Green](https://www.home-assistant.io/green/). Вартість [€70 без урахування податку](https://thepihut.com/products/home-assistant-green).\n\n<LessonImages src=\"school-2024-cyprus-relocant-manual/home-assistant-green.png\" alt=\"Home Assistant green\"/>\n\nВаріант трохи складніший, але ви навіть можете мати контроль над операційною системою, це можна знайти/купити [Raspberry Pi](https://www.raspberrypi.com). Вартість [€90 без урахування податку](https://https://thepihut.com/products/raspberry-pi-5-starter-kit). На сторінці [Встановлення](https://www.home-assistant.io/installation/) є багато варіантів, що відповідають всім смакам.\n\n<LessonImages imageClasses=\"small\" src=\"school-2024-cyprus-relocant-manual/raspberry-pi.png\" alt=\"Raspberry Pi\"/>\n\nЯ настійно рекомендую призначити статичну локальну IP-адресу для вашого домашнього сервера. Якщо неможливо потрапити до налаштувань маршрутизатора, то можна додатково встановити другий маршрутизатор (у мене [MikroTik](https://mikrotik.com/product/hap_ax2), приблизно [€80](https://www.mstronics.com/c/337_1345_485/networking-devices-routers.html?filter_id=154)), і налаштувати Інтернет на ньому. І взагалі, краще для всіх розумних пристроїв Wi-Fi призначити статичну IP-адресу. Це часто важливо для належної роботи інтеграцій Home Assistant.\n\n<LessonImages imageClasses=\"small\" src=\"school-2024-cyprus-relocant-manual/sonoff-zigbee-stick.png\" alt=\"Sonoff Zigbee USB Stick\"/>\n\nЯ настій��о рекомендую призначити статичну локальну IP-адресу для вашого домашнього сервера. Якщо неможливо увійти до налаштувань маршрутизатора, то ви можете додатково встановити другий маршрутизатор (у мене є MikroTik, приблизно €80), та налаштувати Інтернет на ньому. І взагалі, краще призначити статичний IP для всіх розумних Wi-Fi пристроїв. Це часто важливо для правильної роботи інтеграцій Home Assistant.\n\n## Перемикач котла\n\nКотел споживає 3-3,5 кВт, і звичайний розумний перемикач не підійде. При виборі обов'язково зверніть увагу на допустимий струм; він повинен бути не менше 16А, і краще 20А. Важко швидко знайти Zigbee перемикач на самому острові, я замовив з [Китаю](https://vi.aliexpress.com/item/1005006833309900.html), він коштував близько €20.\n\n<robo-academy-grid :columns=\"2\" textAlign=\"center\">\n    <robo-academy-grid-element>\n      <LessonImages src=\"school-2024-cyprus-relocant-manual/boiler-switch-dimension.png\" alt=\"Boiler Switch\"/>\n    </robo-academy-grid-element>\n    <robo-academy-grid-element>\n      <LessonImages src=\"school-2024-cyprus-relocant-manual/boiler-switch-wiring.png\" alt=\"Boiler Switch Wiring\"/>\n    </robo-academy-grid-element/>\n</robo-academy-grid>\n\nПерша і найважливіша автоматизація - вимкнути кнопку через N хвилин після будь-якого включення. Ми налаштовуємо це і більше не думаємо про те, чи ви забули вимкнути кнопку, чи вона працює вже третій день. Приклад автоматизації для Home Assistant, вам потрібно замінити його на свій `device_id` та `entity_id`:\n\n<LessonCodeWrapper language=\"yaml\" noCopyIcon>\n    alias: Boiler turn off after 30 min\n    description: \"\"\n    trigger:\n    - platform: device\n        type: turned_on\n        device_id: a7ee4b26ec5b9e36d959f7b4b8490c42\n        entity_id: 61230c7b5528330e3b60ee38c5fe1f12\n        domain: switch\n        for:\n        hours: 0\n        minutes: 30\n        seconds: 0\n    condition: []\n    action:\n    - type: turn_off\n        device_id: a7ee4b26ec5b9e36d959f7b4b8490c42\n        entity_id: 61230c7b5528330e3b60ee38c5fe1f12\n        domain: switch\n    mode: single\n</LessonCodeWrapper>\n\nВи можете змінювати час протягом року. Наприклад, в лютому мені потрібно нагрівати воду протягом години, а в квітні 30 хвилин вистачить. Щось корисне - д��дати відправку сповіщення на ваш телефон, коли вода нагріта.\n\n<robo-academy-note type=\"note\" title=\"Homework\">\n  Зробіть автоматику, яка буде вимикати котел через вказані Х хвилин. Щоб установити час як змінну, перегляньте <a href=\"https://www.home-assistant.io/integrations/input_number/\">цю інтеграцію</a>\n</robo-academy-note>\n\n## Пульт дистанційного керування ІК для кондиціонерів та телевізорів\n\nПульт дистанційного керування поставляється з підключенням Wi-Fi (потребує постійного живлення) та підключенням Zigbee (живлення від батарей).\n\nВаріант Wi-Fi, який я спробував, був від виробника [Broadlink](https://www.ibroadlink.com/productinfo/762674.html), куплений на [Amazon](https://www.amazon.de/-/en/dp/B07ZSG9Y67/), приблизно €30. Для початкової настройки вам доведеться встановити їх додаток на телефоні та створити обліковий запис, але після цього ІК пульт дистанційного керування буде працювати в локальній мережі, підключення до HA виконується за допомогою [інтеграції](https://www.home-assistant.io/integrations/broadlink/). Для подальшої настройки пульта дистанційного керування під свої потреби, я рекомендую подивитися на репозиторій [SmartIR](https://github.com/smartHomeHub/SmartIR) - це велика бібліотека готових команд для різних кондиціонерів та телевізорів.\n\n<robo-academy-note type=\"note\" title=\"Порада\">\n  Якщо ваш конкретний модель кондиціонера не знайдено, спробуйте інші моделі від того ж виробника. Ймовірно, команди будуть однакові, і ви зможете підключити свій кондиціонер.\n</robo-academy-note>\n\n<LessonImages src=\"school-2024-cyprus-relocant-manual/broadlink-ir.png\" alt=\"Broadlink IR Remote Control\"/>\n\nПриклад конфігурації для Broadlink IR Remote:\n\n<LessonCodeWrapper language=\"yaml\" noCopyIcon>\n    climate:\n    - platform: smartir\n        name: Living Room AC\n        unique_id: living_room_ac\n        device_code: 1390\n        controller_data: remote.living_room_ir_remote_control\n        temperature_sensor: sensor.0xa4c138b6ad623598_temperature\n        humidity_sensor: sensor.0xa4c138b6ad623598_humidity \n</LessonCodeWrapper>\n\nПульто��і пристрої, які працюють на Zigbee, не потребують постійного підключення до живлення, але працюють від батарейок. З одного боку, це плюс, оскільки ви можете розмістити пристрій в будь-якому зручному місці у кімнаті. З іншого боку, батарейки буде потрібно замінювати за потреби. Процес налаштування таких пультів може також відрізнятися від Broadlink. Якщо ви не можете використовувати бібліотеку SmartIR, пульт потрібно буде навчати для кожної команди окремо і зберігати в конфігурації Home Assistant.\n\nПрограмовані пультові пристрої дуже легко встановлюються та налаштовуються; вони не потребують кріплення на стіну або підключення до шини кондиціонера. Однак є невелике обмеження через відсутність зворотного зв'язку між пристроями. Ми не можемо перевірити, щ�� кондиціонер увімкнувся і виконує точно ту команду, яку ми відправили. Однак ми це робимо швидко і без шкоди для квартири. Щоб надати трохи більше інформації пульту, ви можете встановити будь-який датчик температури та вологості Zigbee, наприклад [цей](https://vi.aliexpress.com/item/1005005595631552.html) за €10, і пов'язати показання з пультом. Таким чином ми маємо простий зворотний зв'язок, і кількість цікавих сценаріїв збільшується.\n\n## Лічильник енергії\n\nЄ напівінвазивні лічильники споживання електроенергії, такі як той, що на зображенні нижче:\n\n<LessonImages imageClasses=\"small\" src=\"school-2024-cyprus-relocant-manual/energy-meter.png\" alt=\"Energy Meter\"/>\n\nВони по��инні бути живлені, підключаючи L та N до входу. З іншого боку, індукційне кільце підключене до лічильника, який ми висіваємо на фазу або лінію споживання для вимірювання. Більшість будинків та квартир мають 3 фази, що означає, що вам потрібно встановити 3 такі модулі. Я купив це на [Amazon](https://www.amazon.de/gp/product/B0C37DJXVD/) за €60, по одному на кожну фазу. У старих будинках може бути лише одна фаза.\n\n## Висновок\n\nДля мене розумний будинок - це не розкіш, а необхідність. Це місце, де я хочу відпочивати і проводити час зі своєю сім'єю, не витрачаючи енергію на вирішення повсякденних проблем. Вартість вищезгаданого комплекту у моєму випадку становила близько €500 і кілька вечорів. Результат безцінний!","fileInfo":{"path":"uk/learn/school-2024-cyprus-relocant-manual/overview.md","name":"overview"},"defaultName":"Robonomics School 2024 / Cyprus Relocant Manual: Smart Home","lastUpdate":null}},"context":{}}