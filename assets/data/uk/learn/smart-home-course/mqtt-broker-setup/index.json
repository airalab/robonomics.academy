{"hash":"d581ab531c5af1fcf498eba534e7cd9db8b6d676","data":{"course":{"id":"cacceeb3fd63439ed8e5e491e977485a","title":"Урок №3, Налаштування MQTT брокера та ініціалізація Hass","description":"курс домашнього асистента","content":"\n## Вступ\n\nПісля завершення налаштування Raspberry Pi, наступним кроком є встановлення MQTT брокера на Raspberry Pi. Як вже зазначалося вище, брокер відповідає за маршрутизацію повідомлень між різними клієнтами MQTT. Ви встановите та налаштуєте Eclipse Mosquitto, відкритий брокер MQTT.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nКрім того, ви завершите налаштування Home Assistant та додасте до нього інтеграцію MQTT.\n\n## Інструкції\n\n<List type=\"numbers\">\n\n<li>\n\n\nВстановлення брокера Mosquitto\n\n<List>\n<li>\n\nВстановіть [брокер Mosquitto](https://mosquitto.org/) на свій Raspberry Pi:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nВведіть ВАШЕ_ІМ'Я_КОРИСТУВАЧА (використовуйте будь-яке, яке вам потрібно) та пароль (вас попросять ввести пароль після команди):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nВідредагуйте файл конфігурації:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nДодайте наступне до файлу:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nЗбережіть файл та перезапустіть службу:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nНарешті, перевірте статус брокера:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nВи повинні побачити щось на зразок цього:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nНалаштування Home Assistant та MQTT\n\n<List>\n\n<li>\n\nВідкрийте веб-переглядач та перейдіть за адресою <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. (з тим самим IP-адресою, яку ви знайшли у попередньому уроці). Будьте уважні, що адреса Raspberry Pi може змінюватися з часом через налаштування маршрутизатора. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nНа першій сторінці введіть будь-яке ім'я, ім'я користувача, пароль, які вам потрібно, та натисніть на \"<code>CREATE ACCOUNT</code>\"\n</li>\n\n<li>\n\nПотім введіть назву свого будинку, встановіть своє місцезнаходження та систему одиниць. Натисніть \"<code>DETECT</code>\", щоб знайти своє місцезнаходження та встановити свій часовий пояс та систему одиниць на основі цього місця. Якщо ви не хочете надсилати своє місцезнаходження, ви можете встановити ці значення вручну.\n\n</li>\n\n<li>\n\nНа наступному екрані Home Assistant покаже будь-які пристрої, які він виявив у вашій мережі. Не хвилюйтеся, якщо ви бачите менше елементів, ніж показано нижче; ви завжди можете додати пристрої вручну пізніше. Наразі просто натисніть <code>FINISH</code> і ви потрапите на головний екран Home Assistant.\n\n</li>\n\n<li>\n\nТепер нам потрібно встановити інтеграцію MQTT. Перейдіть до <code>Settings</code> -> <code>Devices & Services.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nНатисніть кнопку <code>ADD INTEGRATION</code> у правому нижньому кутку. У відкритому вікні знайдіть <code>MQTT</code>.\n\n</li>\n\n<li>\n\nВиберіть MQTT та налаштуйте адресу свого брокера — <code>localhost</code>, порт — <code>1883</code> та ваше ім'я користувача та пароль (ті самі, які ви створили раніше для брокера Mosquitto), після чого натисніть <code>SUBMIT</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"uk/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}