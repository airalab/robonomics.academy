{"hash":"94f13789db7ff3910ce38bd85f3d1c9bd0ae6890","data":{"course":{"id":"12ba20048ca1b3e47a085b0361e2aff4","title":"Μάθημα #4, Αισθητήρες σύνδεσης","description":"ΑΙΣΘΗΤΗΡΕΣ ΣΥΝΔΕΣΙΜΟΤΗΤΑΣ","content":"\nΣτα ακόλουθα άρθρα, θα μάθετε περισσότερα σχετικά με το Αισθητήρες Σύνδεσης. Μετά από αυτό, μπορείτε να συμμετάσχετε στη φιλοξενία του Διακεκεντρωμένου Δικτύου Αισθητήρων ή να δημιουργήσετε το δικό σας χάρτη αισθητήρων.\n\n## Σχετικά με την Σύνδεση Αισθητήρων\n\nΤο Διακεκεντρωμένο Δίκτυο Αισθητήρων χρησιμοποιεί το Python module `sensors-connectivity` ([κώδικας πηγής](https://github.com/airalab/sensors-connectivity)). Αυτό το module επιτρέπει σε οποιονδήποτε χρήστη να ξεκινήσει το δικό του διακομιστή για να λαμβάνει δεδομένα από αισθητήρες και να τα επεξεργαστεί περαιτέρω. Προς το παρόν, οι προγραμματιστές έχουν ξεκινήσει αρκετούς τέτοιους διακομιστές και οποιοσδήποτε αισθτήρας μπορεί να στείλει δεδομένα σε αυτούς. Η λειτουργία πολλαπλών διακομιστών αποφεύγει την απώλεια δεδομένων σε περίπτωση προβλημάτων με έναν από αυτούς, καθώς οι αισθητήρες θα μεταβούν από έναν μη λειτουργικό διακομιστή σε έναν λειτουργικό. Βασικά, μπορείτε να σκεφτείτε το module Σύνδεσης Αισθητήρων ως ένα μαύρο κουτί με μία είσοδο (δεδομένα αισθητήρα) και πολλές εξόδους.\n\n<LessonImages  figure figureCaption=\"Module architecture\" src=\"sensors-connectivity-course/lesson-4-1.png\" alt=\"Module architecture\"/>\n\nΤο module Σύνδεσης Αισθητήρων είναι ένα σύνολο σταθμών (σταθμός_1, σταθμός_2 ... σταθμός_n), οι οποίοι λαμβάνουν διάφορα δεδομένα, συμπεριλαμβανομένων δεδομένων από αισθητήρες μέσω πρωτοκόλλου HTTP. Επίσης, μπορεί να είναι αισθητήρες που συνδέονται στον υπολογιστή μέσω USB ή οποιαδήποτε άλλη πηγή δεδομένων. Τα δεδομένα που λαμβάνονται από τους σταθμούς επεξεργάζονται από το module και περνούν στους τροφοδότες (τροφοδότης_1, τροφοδότης_2 ... τροφοδότης_n). Οι τροφοδότες στέλνουν τα επεξεργασμένα δεδομένα στον χρήστη; στην περίπτωσή μας τα δεδομένα στέλνονται στο αποκεντρωμένο κανάλι IPFS. \n\nΈνας χάρτης του [Διακεκεντρωμένου Δικτύου Αισθητήρων](https://sensors.robonomics.network/#/) είναι μια αποκεντρωμένη εφαρμογή (dapp) που τρέχει στον υπολογιστή. Διαβάζει δεδομένα από το κανάλι IPFS και τα εμφανίζει στο χάρτη. Δεν υπάρχει άμεση σύνδεση μεταξύ του διακομιστή που συλλέγει δεδομένα από τους αισθητήρες και του χάρτη που βλέπει ο χρήστης; τα δεδομένα μεταφέρονται μεταξύ τους μέσω IPFS pubsub, το οποίο μειώνει το φορτίο στους διακομιστές. \n\nΕπιπλέον, από καιρό σε καιρό, ένα αρχείο με δεδομένα για την τελευταία περίοδο χρόνου αποθηκεύεται στο IPFS, και ένα hash αυτών των δεδομένων καταγράφεται στη συνέχεια στο blockchain. Δεδομένου ότι το IPFS είναι ένα δίκτυο με περιεχόμενο-διευθυνθέντα, η αποθήκευση δεδομένων σε αυτό εξασφαλίζει ότι οποιαδήποτε αλλαγή δεδομένων δεν περνά απαρατήρητη, επειδή η διεύθυνση του απαιτούμενου αρχείου περιέχει ένα hash του περιεχομένου του, το οποίο θα αλλάξει με οποιαδήποτε αλλαγή δεδομένων. Το blockchain χρησιμοποιείται για να περάσει το hash στον χρήστη, ο οποίος μπορεί να το χρησιμοποιήσει για να λάβει τα απαιτούμενα δεδομένα από το IPFS (αυτό συμβαίνει όταν ζητάτε ιστορικό του χάρτη).\n\n## Ρύθμιση μονάδας για Linux\n\n**Προ-προϋποθέσεις και Εγκατάσταση**\n\n<List type=\"numbers\">\n\n<li>\n\nΓια να χτίσετε το module `sensors-connectivity` πρέπει να έχει εγκατασταθεί το IPFS daemon με έκδοση μέχρι `0.8.x`. Υποθέτοντας ότι εργάζεστε σε Linux, εκτελέστε το ακόλουθο (για έκδοση `0.8.0`):\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">wget https://dist.ipfs.io/go-ipfs/v0.8.0/go-ipfs_v0.8.0_linux-amd64.tar.gz\ntar -xzf go-ipfs_v0.8.0_linux-amd64.tar.gz\ncd go-ipfs\nsudo bash install.sh\nipfs init</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nΕγκαταστήστε το πακέτο με εργαλεία ανάπτυξης `python3-dev` και το εργαλείο εγκατάστασης πακέτων για τη γλώσσα προγραμματισμού Python `pip`:\n\n<LessonCodeWrapper codeClass=\"long-code\" language=\"bash\">sudo apt install python3-dev python3-pip</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nΕγκαταστήστε το module ως ένα πακέτο PyPI:\n\n<LessonCodeWrapper codeClass=\"long-code\" language=\"bash\">pip3 install sensors-connectivity</LessonCodeWrapper>\n\nΑν βλέπετε την ακόλουθη προειδοποίηση: \n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">WARNING: The script sensors_connectivity is installed in '/home/test2/.local/bin' which is not on PATH.\nConsider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.</LessonCodeWrapper>\n\nΕκτελέστε την επόμενη εντολή:\n\n<LessonCodeWrapper  language=\"bash\">cd ~\nexport PATH=\"/usr/local/bin:$PATH\"\nsource .profile</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Διαμόρφωση\n\n<List type=\"numbers\">\n\n<li>\n\nΔημιουργήστε φάκελο για το αρχείο ρυθμίσεων και το αρχείο βάσης δεδομένων όπου επιθυμείτε. Αυτή η βάση δεδομένων θα αποθηκεύει τα hashes των δεδομένων αισθητήρων του IPFS, τη χρονική σήμανση και την κατάσταση της υπηρεσίας:\n\n<LessonCodeWrapper language=\"bash\">cd ~\nmkdir sensors_connectivity\ncd sensors_connectivity\ntouch database.db</LessonCodeWrapper>\n\n<RoboAcademyNote type=\"okay\" title=\"INFO\">\nΤο όνομα του αρχείου βάσης δεδομένων μπορεί να είναι οποιοδήποτε, αλλά η επέκταση πρέπει να είναι <code>.db</code>\n</RoboAcademyNote>\n\n</li>\n\n\n<li>\n\nΔημιουργήστε το αρχείο ρυθμίσεων στον ίδιο φάκελο:\n\n<LessonCodeWrapper language=\"bash\">touch my_config.json</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nΑντιγράψτε το παρακάτω στο αρχείο και εισάγετε την πλήρη διαδρομή προς το αρχείο βάσης στο πεδίο db_path. Αυτή η ρύθμιση θα είναι αρκετή για να λάβετε δεδομένα αισθητήρων μέσω HTTP και να τα στείλετε στο χάρτη του Robonomics:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"json\">{\n   \"general\": {\n      \"publish_interval\": 30,\n      \"db_path\": \"<YOUR/PATH/TO/DATABASE>\"\n   },\n   \"comstation\": {\n      \"enable\": false,\n      \"port\": \"/dev/<YOUR/PATH/TO/BOARD>\",\n      \"work_period\": 300,\n      \"geo\": \"00.000000,00.000000\",\n      \"public_key\": \"\"\n   },\n   \"httpstation\": {\n      \"enable\": true,\n      \"port\": 8001\n   },\n   \"mqttstation\": {\n      \"enable\": false,\n      \"host\": \"localhost\",\n      \"port\": 1883,\n      \"topic\": \"/freertos_mqtt_robonomics_example/#\",\n      \"username\": \"\",\n      \"password\": \"\"\n   },\n   \"robonomics\": {\n      \"enable\": true,\n      \"ipfs_provider\": \"/ip4/127.0.0.1/tcp/5001/http\",\n      \"ipfs_topic\": \"airalab.lighthouse.5.robonomics.eth\"\n   },\n   \"datalog\": {\n      \"enable\": false,\n      \"suri\": \"\",\n      \"dump_interval\": 60,\n      \"temporal_username\": \"\",\n      \"temporal_password\": \"\",\n      \"pinata_api\": \"\",\n      \"pinata_secret\": \"\"\n   },\n   \"dev\": {\n      \"sentry\": \"\"\n   },\n   \"frontier\": {\n      \"enable\": false,\n      \"suri\": \"\"\n   },\n   \"trackagro\": {\n      \"enable\": false,\n      \"token\": \"\"\n   }\n}</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Εκκίνηση\n\n\n<List type=\"numbers\">\n\n<li>\n\nΕκκίνηση του IPFS daemon:\n\n<LessonCodeWrapper codeCLass=\"big-code\" language=\"bash\">ipfs daemon --enable-pubsub-experiment</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nΑφού οι ρυθμίσεις είναι έτοιμες, εκτελέστε την υπηρεσία με τη διαδρομή προς το αρχείο ρυθμίσεων σε ένα άλλο τερματικό:\n\n<LessonCodeWrapper language=\"bash\">sensors_connectivity \"path/to/your/config/file”</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nΘα δείτε αρχεία καταγραφής στο τερματικό (επίσης, θα προστεθούν στο `~/.logs`). Παράδειγμα:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">$ sensors_connectivity test.json\n2022-09-02 14:08:48,408 - INFO - Getting data from the stations...\n2022-09-02 14:08:48,409 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:08:48,409 - INFO - Sending result to the feeders...\n2022-09-02 14:08:48,411 - INFO - Checking data base...\n2022-09-02 14:09:18,410 - INFO - Sending result to the feeders...\n2022-09-02 14:09:18,410 - INFO - Getting data from the stations...\n2022-09-02 14:09:18,411 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:09:48,411 - INFO - Sending result to the feeders...\n2022-09-02 14:09:48,412 - INFO - Getting data from the stations...\n2022-09-02 14:09:48,413 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:10:18,413 - INFO - Sending result to the feeders...\n2022-09-02 14:10:18,413 - INFO - Getting data from the stations...</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Μετά την εγκατάσταση\n\nΓια να συνδέσετε το module `sensors-connectivity` στο Διακεντρωμένο Δίκτυο Αισθητήρων μας και να δείτε τα δεδομένα σας στο χάρτη, πρέπει να στείλετε το IPFS ID σας στο [vm@multi-agent.io](mailto:vm@multi-agent.io) ή [ping@airalab.org](mailto:ping@airalab.org). Θα προσθέσουμε το ID σας σε μια λίστα ελέγχου πρόσβασης.\n\nΛάβετε το IPFS `ID` σας με την ακόλουθη εντολή μετά την εκκίνηση του IPFS daemon:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">$ ipfs id\n{\n\t\"ID\": \"QmUZxw8jsRpSx5rWkTpJokPGKvWihTrt5rbRCFXzJ4eCAP\",\n\t\"PublicKey\": \"CAASpgIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC/uMV3rLM/C+LOh2DGPo3chr+VM+vyYMKi...\n    ...</LessonCodeWrapper>","fileInfo":{"path":"el/learn/sensors-connectivity-course/sensors-connectivity-module.md","name":"sensors-connectivity-module"},"defaultName":"Sensors Connectivity & Decentralized Sensors Network","lastUpdate":null}},"context":{}}