{"hash":"b7127cfb676a767c419fa0b68f47fd3dddba7323","data":{"course":{"id":"9bbd0fc396700c53b97f47a6865a6483","title":"Μάθημα #3, Ρύθμιση MQTT Broker και Εκκίνηση Hass","description":"μάθημα βοηθού σπιτιού","content":"\n## Εισαγωγή\n\nΜετά την ολοκλήρωση της ρύθμισης του Raspberry Pi, το επόμενο βήμα είναι η εγκατάσταση του MQTT Broker στο Raspberry Pi. Όπως αναφέρθηκε παραπάνω, ο Broker είναι υπεύθυνος για τη δρομολόγηση μηνυμάτων μεταξύ διαφορετικών πελατών MQTT. Θα εγκαταστήσετε και θα ρυθμίσετε το Eclipse Mosquitto, έναν ανοικτού κώδικα MQTT broker.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nΕπιπλέον, θα ολοκληρώσετε τη ρύθμιση του Home Assistant και θα προσθέσετε την ενσωμάτωση MQTT σε αυτό.\n\n## Οδηγίες\n\n<List type=\"numbers\">\n\n<li>\n\n\nΕγκατάσταση Mosquitto Broker\n\n<List>\n<li>\n\nΕγκαταστήστε το [Mosquitto Broker](https://mosquitto.org/) στο Raspberry Pi σας:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nΕισάγετε ΤΟ_ΟΝΟΜΑ_ΧΡΗΣΤΗ_ΣΑΣ (χρησιμοποιήστε όποιο θέλετε) και κωδικό (θα σας ζητηθεί να εισάγετε τον κωδικό μετά την εντολή):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nΕπεξεργασία αρχείου ρυθμίσεων:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nΠροσθέστε τα παρακάτω στο αρχείο:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nΑποθηκεύστε το αρχείο και επανεκκινήστε την υπηρεσία:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nΤέλος, ελέγξτε την κατάσταση του broker:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nΘα πρέπει να δείτε κάτι τέτοιο:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nΡύθμιση του Home Assistant και MQTT\n\n<List>\n\n<li>\n\nΑνοίξτε τον περιηγητή ιστού και πηγαίνετε στη διεύθυνση <code>http://%RASPBERRY_IP_ADDRESS%:8123</code>. (με την ίδια διεύθυνση IP που βρήκατε στο προηγούμενο μάθημα). Να γνωρίζετε ότι η διεύθυνση του Raspberry Pi μπορεί να αλλάξει με τον χρόνο λόγω ρυθμίσεων δρομολογητή. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nΣτην πρώτη σελίδα, εισάγετε οποιοδήποτε όνομα, όνομα χρήστη, κωδικό που θέλετε και κάντε κλικ στο \"<code>ΔΗΜΙΟΥΡΓΙΑ ΛΟΓΑΡΙΑΣΜΟΥ</code>\"\n</li>\n\n<li>\n\nΣτη συνέχεια, εισαγάγετε ένα όνομα για το σπίτι σας και ορίστε την τοποθεσία και το σύστημα μονάδων σας. Κάντε κλικ στο \"<code>ΑΝΙΧΝΕΥΣΗ</code>\" για να βρείτε την τοποθεσία σας και να ορίσετε τη ζώνη ώρας και το σύστημα μονάδων βάσει αυτής της τοποθεσίας. Αν δεν θέλετε να στείλετε την τοποθεσία σας, μπορείτε να ορίσετε αυτές τις τιμές χειροκίνητα.\n\n</li>\n\n<li>\n\nΣτην επόμενη οθόνη, το Home Assistant θα εμφανίσει οποιεσδήποτε συσκευές που έχει ανακαλύψει στο δίκτυό σας. Μην ανησυχείτε αν βλέπετε λιγότερα στοιχεία από ό,τι φαίνεται παρακάτω. Μπορείτε πάντα να προσθέσετε συσκευές χειροκίνητα αργότερα. Πατήστε τώρα <code>ΤΕΛΟΣ</code> και θα βρίσκεστε στην κύρια οθόνη του Home Assistant.\n\n</li>\n\n<li>\n\nΤώρα πρέπει να εγκαταστήσουμε μια ενσωμάτωση MQTT. Πηγαίνετε στις <code>Ρυθμίσεις</code> -> <code>Συσκευές & Υπηρεσίες.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nΠατήστε το κουμπί <code>ΠΡΟΣΘΗΚΗ ΕΝΣΩΜΑΤΩΣΗΣ</code> στην κάτω δεξιά γωνία. Στο ανοιχτό παράθυρο βρείτε το <code>MQTT</code>.\n\n</li>\n\n<li>\n\nΕπιλέξτε το MQTT και ορίστε τη διεύθυνση του broker σας — <code>localhost</code> θύρα — <code>1883</code> και το όνομα χρήστη και ο κωδικός πρόσβασης σας (το ίδιο που δημιουργήσατε νωρίτερα για το Mosquitto Broker) και στη συνέχεια πατήστε <code>ΥΠΟΒΟΛΗ</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"el/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}