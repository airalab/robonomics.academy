{"hash":"957c30fcef9ac2d232ac92277ff384b34731a809","data":{"course":{"id":"54b84ea60bf3119a2865f445d9a8de40","title":"Lezione n. 3, Configurazione del Broker MQTT e Inizializzazione di Hass","description":"corso di assistente domestico","content":"\n## Introduzione\n\nDopo aver completato la configurazione del Raspberry Pi, il passo successivo è installare il Broker MQTT sul Raspberry Pi. Come già detto, il Broker è responsabile del routing dei messaggi tra i diversi client MQTT. Installerai e configurerai Eclipse Mosquitto, un broker MQTT open source.\n\n<LessonImages src=\"smart-house-course/lesson-3-1.jpg\" alt=\"scheme\" imageClasses=\"mb\"/>\n\nInoltre, completerai la configurazione di Home Assistant e aggiungerai l'integrazione MQTT ad esso.\n\n## Istruzioni\n\n<List type=\"numbers\">\n\n<li>\n\n\nInstallazione del Broker Mosquitto\n\n<List>\n<li>\n\nInstalla il [Broker Mosquitto](https://mosquitto.org/) sul tuo Raspberry Pi:\n\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo apt install mosquitto mosquitto-clients -y\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nInserisci IL_TUO_USERNAME (usa quello che preferisci) e la password (ti verrà chiesto di inserire la password dopo il comando):\n\n<LessonCodeWrapper language=\"bash\" noLines codeClass=\"big-code\">\nsudo mosquitto_passwd -c /etc/mosquitto/passwd YOUR_USERNAME\n</LessonCodeWrapper>\n\n</li>\n\n<li>\n\nModifica il file di configurazione:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo nano /etc/mosquitto/conf.d/local.conf\n</LessonCodeWrapper>\n\nAggiungi quanto segue al file:\n\n<LessonCodeWrapper language=\"bash\">\nlistener 1883\nallow_anonymous false\npassword_file /etc/mosquitto/passwd\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nSalva il file e riavvia il servizio:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsudo systemctl restart mosquitto\n</LessonCodeWrapper>\n</li>\n\n<li>\n\nInfine, controlla lo stato del broker:\n\n<LessonCodeWrapper language=\"bash\" noLines>\nsystemctl status mosquitto\n</LessonCodeWrapper>\n\nDovresti vedere qualcosa del genere:\n\n<LessonImages src=\"smart-house-course/lesson-3-2.jpg\" alt=\"code\"/>\n</li>\n</List>\n</li>\n\n<li>\n\nConfigurazione di Home Assistant e MQTT\n\n<List>\n\n<li>\n\nApri il browser web e vai su <code>http://%INDIRIZZO_IP_RASPBERRY%:8123</code>. (con lo stesso indirizzo IP che hai trovato nella lezione precedente). Tieni presente che l'indirizzo del Raspberry Pi potrebbe cambiare nel tempo a causa delle impostazioni del router. \n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYd1Mh2VHVyF3WgvFsN3NFkozXscnCVmEV2YG86UKtK3C', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nNella prima pagina, inserisci qualsiasi nome, username, password desiderati e clicca su \"<code>CREA ACCOUNT</code>\"\n</li>\n\n<li>\n\nSuccessivamente, inserisci un nome per la tua casa e imposta la tua posizione e il sistema di unità. Clicca su \"<code>DETECT</code>\" per trovare la tua posizione e impostare il fuso orario e il sistema di unità in base a quella posizione. Se preferisci non inviare la tua posizione, puoi impostare manualmente questi valori.\n\n</li>\n\n<li>\n\nNella schermata successiva, Home Assistant mostrerà tutti i dispositivi che ha scoperto nella tua rete. Non preoccuparti se vedi meno elementi rispetto a quelli mostrati di seguito; puoi sempre aggiungere manualmente dispositivi in seguito. Per ora, clicca su <code>FINISH</code> e sarai sulla schermata principale di Home Assistant.\n\n</li>\n\n<li>\n\nOra dobbiamo installare un'integrazione MQTT. Vai su <code>Impostazioni</code> -> <code>Dispositivi e Servizi.</code>\n\n<LessonVideo controls :videos=\"[{src: 'https://crustipfs.info/ipfs/QmYm9qNfpGdePRHRvmahY2DgHXRfAWNN6CasEY4tFRBARr', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nPremi il pulsante <code>AGGIUNGI INTEGRAZIONE</code> nell'angolo in basso a destra. Nella finestra aperta trova <code>MQTT</code>.\n\n</li>\n\n<li>\n\nSeleziona MQTT e imposta l'indirizzo del tuo broker — <code>localhost</code> porta — <code>1883</code> e il tuo nome utente e password (gli stessi che hai creato in precedenza per il broker Mosquitto) poi premi <code>SUBMIT</code>.\n</li>\n\n</List>\n</li>\n</List>","fileInfo":{"path":"it/learn/smart-home-course/mqtt-broker-setup.md","name":"mqtt-broker-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}