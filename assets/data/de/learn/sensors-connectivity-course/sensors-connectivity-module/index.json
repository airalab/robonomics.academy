{"hash":"5d4f08f99729279cbad41c23c8d66dce511a8ae5","data":{"course":{"id":"22b434ee8e792a747f0c13b746ede5b0","title":"Lektion #4, Sensorenverbindung Modul","description":"SENSOREN VERBINDUNGSMODUL","content":"\nIn den folgenden Artikeln erfahren Sie mehr über das Sensorverbindung Modul. Danach können Sie sich unserem dezentralen Sensorennetzwerk anschließen oder Ihre eigene Sensorkarte erstellen.\n\n## Über Sensorenverbindung\n\nDas dezentrale Sensorennetzwerk verwendet das `sensors-connectivity` Python-Modul ([Quellcode](https://github.com/airalab/sensors-connectivity)). Dieses Modul ermöglicht es jedem Benutzer, seinen eigenen Server zu starten, um Daten von Sensoren zu empfangen und weiter zu verarbeiten. Die Entwickler haben derzeit mehrere solcher Server gestartet, und jeder Sensor kann Daten an sie senden. Durch den Betrieb mehrerer Server wird ein Datenverlust vermieden, falls es Probleme mit einem von ihnen gibt, da die Sensoren von einem nicht funktionierenden Server zu einem funktionierenden wechseln. Im Grunde genommen können Sie sich das Sensorenverbindung Modul als eine Blackbox mit einem Eingang (Sensordaten) und vielen Ausgängen vorstellen.\n\n<LessonImages  figure figureCaption=\"Module architecture\" src=\"sensors-connectivity-course/lesson-4-1.png\" alt=\"Module architecture\"/>\n\nDas Sensorenverbindung Modul ist eine Reihe von Stationen (station_1, station_2 ... station_n), die verschiedene Daten empfangen, einschließlich Daten von Sensoren über das HTTP-Protokoll. Es können auch Sensoren sein, die über USB oder eine andere Datenquelle mit dem Computer verbunden sind. Die von den Stationen empfangenen Daten werden vom Modul verarbeitet und an Fütterer (feeder_1, feeder_2 ... feeder_n) weitergeleitet. Die Fütterer senden die verarbeiteten Daten an den Benutzer; in unserem Fall werden die Daten an den dezentralen IPFS-Kanal gesendet. \n\nEine Karte des [Dezentralen Sensorennetzwerks](https://sensors.robonomics.network/#/) ist eine dezentrale Anwendung (dapp), die auf dem Computer läuft. Sie liest Daten aus dem IPFS-Kanal und zeigt sie auf der Karte an. Es besteht keine direkte Verbindung zwischen dem Server, der Daten von den Sensoren sammelt, und der Karte, die der Benutzer sieht; die Daten werden zwischen ihnen über IPFS pubsub übertragen, was die Belastung der Server reduziert. \n\nDarüber hinaus wird von Zeit zu Zeit eine Datei mit Daten für den letzten Zeitraum im IPFS gespeichert, und ein Hash dieser Daten wird dann in die Blockchain aufgezeichnet. Da IPFS ein inhaltsadressiertes Netzwerk ist, stellt das Speichern von Daten darin sicher, dass jede Datenänderung nicht unbemerkt bleibt, da die Adresse der benötigten Datei einen Hash ihres Inhalts enthält, der sich bei jeder Datenänderung ändert. Die Blockchain wird verwendet, um den Hash an den Benutzer weiterzugeben, der ihn verwenden kann, um die benötigten Daten aus IPFS zu erhalten (dies geschieht, wenn Sie eine Historie der Karte anfordern).\n\n## Modul-Setup für Linux\n\n**Voraussetzungen und Installation**\n\n<List type=\"numbers\">\n\n<li>\n\nUm das `sensors-connectivity` Modul zu erstellen, muss der IPFS-Dämon mit einer Version installiert sein, die nicht größer als `0.8.x` ist. Angenommen, Sie arbeiten unter Linux, führen Sie folgendes aus (für Version `0.8.0`):\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">wget https://dist.ipfs.io/go-ipfs/v0.8.0/go-ipfs_v0.8.0_linux-amd64.tar.gz\ntar -xzf go-ipfs_v0.8.0_linux-amd64.tar.gz\ncd go-ipfs\nsudo bash install.sh\nipfs init</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nInstallieren Sie das Paket mit Entwicklungstools `python3-dev` und den Paketinstaller für Python `pip`:\n\n<LessonCodeWrapper codeClass=\"long-code\" language=\"bash\">sudo apt install python3-dev python3-pip</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nInstallieren Sie das Modul als PyPI-Paket:\n\n<LessonCodeWrapper codeClass=\"long-code\" language=\"bash\">pip3 install sensors-connectivity</LessonCodeWrapper>\n\nWenn Sie folgende Warnung sehen: \n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">WARNING: The script sensors_connectivity is installed in '/home/test2/.local/bin' which is not on PATH.\nConsider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.</LessonCodeWrapper>\n\nFühren Sie den nächsten Befehl aus:\n\n<LessonCodeWrapper  language=\"bash\">cd ~\nexport PATH=\"/usr/local/bin:$PATH\"\nsource .profile</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Konfiguration\n\n<List type=\"numbers\">\n\n<li>\n\nErstellen Sie ein Verzeichnis für die Konfigurationsdatei und die Datenbankdatei, wo immer Sie möchten. Diese Datenbank speichert IPFS-Hashes von Sensordaten, Zeitstempel und Servicestatus:\n\n<LessonCodeWrapper language=\"bash\">cd ~\nmkdir sensors_connectivity\ncd sensors_connectivity\ntouch database.db</LessonCodeWrapper>\n\n<RoboAcademyNote type=\"okay\" title=\"INFO\">\nDer Name der Datenbankdatei kann beliebig sein, aber die Erweiterung muss sein <code>.db</code>\n</RoboAcademyNote>\n\n</li>\n\n\n<li>\n\nErstellen Sie die Konfigurationsdatei im selben Verzeichnis:\n\n<LessonCodeWrapper language=\"bash\">touch my_config.json</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nKopieren Sie den folgenden Text in die Datei und fügen Sie den vollständigen Pfad zur Datenbankdatei im Feld db_path ein. Diese Konfiguration reicht aus, um Sensordaten über HTTP abzurufen und an die Robonomics-Karte zu senden:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"json\">{\n   \"general\": {\n      \"publish_interval\": 30,\n      \"db_path\": \"<YOUR/PATH/TO/DATABASE>\"\n   },\n   \"comstation\": {\n      \"enable\": false,\n      \"port\": \"/dev/<YOUR/PATH/TO/BOARD>\",\n      \"work_period\": 300,\n      \"geo\": \"00.000000,00.000000\",\n      \"public_key\": \"\"\n   },\n   \"httpstation\": {\n      \"enable\": true,\n      \"port\": 8001\n   },\n   \"mqttstation\": {\n      \"enable\": false,\n      \"host\": \"localhost\",\n      \"port\": 1883,\n      \"topic\": \"/freertos_mqtt_robonomics_example/#\",\n      \"username\": \"\",\n      \"password\": \"\"\n   },\n   \"robonomics\": {\n      \"enable\": true,\n      \"ipfs_provider\": \"/ip4/127.0.0.1/tcp/5001/http\",\n      \"ipfs_topic\": \"airalab.lighthouse.5.robonomics.eth\"\n   },\n   \"datalog\": {\n      \"enable\": false,\n      \"suri\": \"\",\n      \"dump_interval\": 60,\n      \"temporal_username\": \"\",\n      \"temporal_password\": \"\",\n      \"pinata_api\": \"\",\n      \"pinata_secret\": \"\"\n   },\n   \"dev\": {\n      \"sentry\": \"\"\n   },\n   \"frontier\": {\n      \"enable\": false,\n      \"suri\": \"\"\n   },\n   \"trackagro\": {\n      \"enable\": false,\n      \"token\": \"\"\n   }\n}</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Starten\n\n\n<List type=\"numbers\">\n\n<li>\n\nStarten Sie den IPFS-Dämon:\n\n<LessonCodeWrapper codeCLass=\"big-code\" language=\"bash\">ipfs daemon --enable-pubsub-experiment</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nNachdem die Konfiguration festgelegt ist, führen Sie den Dienst mit dem Pfad zur Konfigurationsdatei in einem anderen Terminal aus:\n\n<LessonCodeWrapper language=\"bash\">sensors_connectivity \"path/to/your/config/file”</LessonCodeWrapper>\n\n</li>\n\n\n<li>\n\nSie sehen Protokolle im Terminal (außerdem werden sie zu „~/.logs“ hinzugefügt). Beispiel:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">$ sensors_connectivity test.json\n2022-09-02 14:08:48,408 - INFO - Getting data from the stations...\n2022-09-02 14:08:48,409 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:08:48,409 - INFO - Sending result to the feeders...\n2022-09-02 14:08:48,411 - INFO - Checking data base...\n2022-09-02 14:09:18,410 - INFO - Sending result to the feeders...\n2022-09-02 14:09:18,410 - INFO - Getting data from the stations...\n2022-09-02 14:09:18,411 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:09:48,411 - INFO - Sending result to the feeders...\n2022-09-02 14:09:48,412 - INFO - Getting data from the stations...\n2022-09-02 14:09:48,413 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:10:18,413 - INFO - Sending result to the feeders...\n2022-09-02 14:10:18,413 - INFO - Getting data from the stations...</LessonCodeWrapper>\n\n</li>\n\n</List>\n\n## Nach der Installation\n\nUm Ihr `sensors-connectivity`-Modul mit unserem Dezentralen Sensorennetzwerk zu verbinden und Ihre Daten auf der Karte zu sehen, müssen Sie Ihre IPFS-ID an [vm@multi-agent.io](mailto:vm@multi-agent.io) oder [ping@airalab.org](mailto:ping@airalab.org) senden. Wir fügen Ihre ID einer Zugriffssteuerungsliste hinzu.\n\nHolen Sie sich Ihre IPFS-ID mit dem folgenden Befehl nach dem Starten des IPFS-Dämons:\n\n<LessonCodeWrapper codeClass=\"big-code\" language=\"bash\">$ ipfs id\n{\n\t\"ID\": \"QmUZxw8jsRpSx5rWkTpJokPGKvWihTrt5rbRCFXzJ4eCAP\",\n\t\"PublicKey\": \"CAASpgIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC/uMV3rLM/C+LOh2DGPo3chr+VM+vyYMKi...\n    ...</LessonCodeWrapper>","fileInfo":{"path":"de/learn/sensors-connectivity-course/sensors-connectivity-module.md","name":"sensors-connectivity-module"},"defaultName":"Sensors Connectivity & Decentralized Sensors Network","lastUpdate":null}},"context":{}}