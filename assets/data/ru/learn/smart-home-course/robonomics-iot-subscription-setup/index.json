{"hash":"f33052c6cd25aad5fc1a1101d4bd76b0f766a37b","data":{"course":{"id":"c9fad2f697bc5e151d71bd6bf84d8736","title":"Урок №5, Настройка подписки Robonomics IoT","description":"курс домашнего помощника","content":"\n\n## О чем это\n\nПодписка Robonomics IoT позволяет пользователям использовать все функции парачейна в течение определенного периода без уплаты стандартных комиссий за транзакции. Активируя подписку, устройства смогут отправлять транзакции с приоритетом.\n\nНа этом уроке вы создадите необходимые учетные записи безопасности умного дома и приобретете подписку IoT.\n\n## Теория\n\nПодписка IoT, а также способ ее приобретения и управления, реализованы с использованием паллета <code>rws</code>, который содержит все необходимые функции. В общем, подписки в Robonomics продаются по модели аукциона, который использует экструзию <code>rws.startAuction()</code> для создания аукциона для определенного идентификатора подписки. Пользователи могут получить доступ к аукциону по идентификатору и делать ставки с использованием экструзии <code>rws.bid()</code>.\n\nПо окончании аукциона адресу с победной ставкой назначается подписка. Теперь этот адрес сможет отправлять транзакции через экструзию <code>rws.call()</code> без комиссий. Однако это не означает, что адрес может делать это без контроля в любое время: у каждой подписки есть определенное количество значения <code>weight</code>, которое должно накапливаться перед выполнением бесплатной транзакции. Некоторое значение <code>weight</code> добавляется к подписке каждый сгенерированный блок в парачейне, благодаря этому Robonomics регулирует пропускную способность парачейна.\n\nКроме того, владелец подписки может использовать экструзию <code>rws.setDevices()</code>, которая делит использование подписки на указанные адреса. При этом <code>weight</code> остается прежним, поэтому чем больше адресов в подписке, тем дольше каждому из них придется ждать перед отправкой бесплатной транзакции.\n\nДля управления Home Assistant с помощью Robonomics вам понадобятся две учетные записи на парачейне Robonomics. Эти учетные записи обеспечат безопасность вашему Home Assistant.\n\nС одной из учетных записей (<code>SUB_OWNER</code>) вы купите подписку Robonomics. Эта учетная запись действует как основной администратор подписки IoT и предоставляет доступ к Home Assistant другим пользователям (с использованием <code>rws.setDevices()</code>). У этой учетной записи должны быть некоторые токены XRT для завершения транзакций покупки подписки.\n\nВторая учетная запись (<code>SUB_CONTROLLER</code>) будет контролировать все процессы Home Assistant устройств (например, телеметрию). Транзакции ваших устройств будут отправляться от имени учетной записи <code>SUB_CONTROLLER</code>. Вы (и любой) сможете видеть эти транзакции в любом исследователе парачейна, таком как [Subscan](https://robonomics.subscan.io/). Однако только вы сможете расшифровать содержимое этих транзакций, пока вы надежно обладаете необходимыми фразами-семенами.\n\n## Инструкции\n\n<List type=\"numbers\">\n\n<li>\n\nСоздание учетных записей владельца и контроллера парачейна\n\n<List>\n\n<li>\n\n<robo-academy-note type=\"warning\" title=\"WARNING\">\nОбе учетные записи должны быть созданы с шифрованием ed25519.\n</robo-academy-note>\n\n</li>\n\n<li>\n\nПерейдите на [приложение Robonomics Parachain](https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/) на портале Polkadot / Substrate. Проверьте верхний левый угол, чтобы убедиться, что вы подключены к парачейну Robonomics.\n\n</li>\n\n<li>\n\nИспользуя формат *ed25519*, вам необходимо создать учетную запись с помощью Polkadot-JS UI и выбрать необходимое шифрование. \n\nЭта функция по умолчанию отключена в Polkadot-JS UI. Чтобы включить ее, перейдите к <code>Настройки</code> -> <code>Общие</code> -> <code>опции учетной записи</code> и выберите <code>Разрешить локальное хранение учетной записи в браузере</code> в выпадающем меню <code>создание учетной записи в браузере</code>.\n \n</li>\n\n<li>\n\nПерейдите к <code>Учетные записи</code> -> <code>Учетные записи</code> и нажмите кнопку <code>Добавить учетную запись</code>. Вы увидите всплывающее меню с семенем учетной записи. Оно имеет две формы: *Мнемоника* (читаемая человеком) и *Сырой* (последовательность цифр и букв).\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmQiJYPYajUJXENX2PzSJMSKGSshyWyPNqugSYxP5eCNvm', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nОткройте <code>Дополнительные параметры создания</code>, измените тип криптографии создания учетной записи на <code>Эдвардс - ed25519</code>. Сохраните мнемоническую фразу семени безопасно и нажмите <code>Далее</code>.\n\n</li>\n\n<li>\n\nВ следующем меню вам необходимо задать имя учетной записи и пароль. Дайте ему имя <code>SUB_OWNER</code> для удобства и нажмите <code>Далее</code>.\n\n</li>\n\n<li>\n\nНа последнем окне нажмите <code>Сохранить</code>, чтобы завершить создание учетной записи. Он также сгенерирует резервные JSON-файлы, которые вы должны безопасно хранить. Позже вы сможете использовать этот файл для восстановления учетной записи, если помните пароль.\n\n</li>\n\n<li>\n\nПовторите эти шаги для учетной записи <code>SUB_CONTROLLER</code>.\n\n</li>\n</List>\n</li>\n\n<li>\n\nДобавление учетных записей в расширение Polkadot.js\n\n<List type=\"numbers\">\n\n<li>\n\nДля удобства вы должны использовать расширение Polkadot.js и добавить эти только что созданные учетные записи в него. Для учетной записи ed25519 вы можете сделать это только с помощью резервного JSON-файла. Вы можете использовать файлы, сохраненные при создании учетных записей.\n\nВы можете получить эти файлы снова, создав резервную копию учетной записи. Нажмите на три точки на своей учетной записи, выберите <code>Создать резервную копию для этой учетной записи</code> и введите свой пароль.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmRd7gztUjWkLF4W2XuJwy5aXBwzNV2aPCU6CQQLvUpSNj', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nОткройте расширение и нажмите кнопку <code>+</code> в правом верхнем углу, затем выберите <code>Восстановить учетную запись из резервного JSON-файла</code>.\n\n</li>\n\n<li>\n\nВ открытом окне загрузите JSON-файл, введите пароль и нажмите <code>Восстановить</code>\n\n</li>\n\n<li>\n\nУбедитесь, что для учетных записей в расширении Polkadot.js выбрана сеть Robonomics. На портале Polkadot / Substrate перейдите в <code>Настройки</code> -> <code>Метаданные</code> и нажмите на кнопку <code>Обновить метаданные</code>. \n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmT5sTNP9t8gpbD4RJJw6ETwG4wiziiChAh2uHHBk9Zsyd', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nПодтвердите обновление метаданных во всплывающем окне. Теперь расширение покажет метку сети, для которой используется адрес.\n\n</li>\n\n</List>\n</li>\n\n<li>\n\nАктивация подписки Robonomics\n\n<List >\n\n<li>\n\n<robo-academy-note type=\"okay\">\nДля этого шага у вас должно быть достаточное количество токенов XRT (минимум 2-3 XRT) на вашем счете <code>SUB_OWNER</code>.\n</robo-academy-note>\n\nПерейдите на страницу подписки Robonomics dapp по ссылке [subscription page](https://dapp.robonomics.network/#/subscription) и нажмите <code>connect account</code> на боковой панели справа.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmXrFCajmJgkRDSbshGD3QehjnoyS6jafEPSjHdYkoBHum', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nВ следующем всплывающем меню подключите расширение Polkadot.js. Вы увидите адрес вашей учетной записи с балансом.\n\n</li>\n\n<li>\n\nПеред покупкой убедитесь, что вы выбрали учетную запись <code>SUB_OWNER</code>. Нажмите на иконку профиля адреса, вы должны увидеть учетную запись <code>SUB_OWNER</code> под полем <code>Проверить учетную запись владельца</code>.\n\n</li>\n\n<li>\n\nНаконец, нажмите кнопку <code>ПОДТВЕРДИТЬ</code> и введите пароль для вашей учетной записи. После этого дождитесь завершения процесса активации. Через некоторое время вы увидите состояние вашей подписки.\n\nЕсли подписки недоступны, **пожалуйста, свяжитесь** с командой Robonomics.\n\n</li>\n</List>\n</li>\n\n<li>\n\nДобавление учетной записи в подписку\n\n<List type=\"numbers\">\n\n<li>\n\nТеперь вам нужно добавить учетную запись <code>SUB_CONTROLLER</code> в **список доступа**. Откройте расширение и нажмите на иконку рядом с именем учетной записи. Он скопирует адрес учетной записи.\n\n<LessonVideo  :videos=\"[{src: 'https://crustipfs.info/ipfs/QmV1gkwtcXsWv54ov9tuXfcHg7nqs1foM8cRwts4sqnqtX', type:'mp4'}]\" />\n\n</li>\n\n<li>\n\nВставьте этот адрес в поле <code>Адрес парачейна Robonomics</code> в разделе **Управление доступом**.\n\nДайте ему имя и нажмите кнопку <code>+</code>. Введите пароль вашей учетной записи <code>SUB_OWNER</code> во всплывающем окне и дождитесь завершения процесса активации.\n\n</li>\n\n<li>\n\nПовторите шаги для учетной записи <code>SUB_OWNER</code>.\n</li>\n</List>\n</li>\n</List>","fileInfo":{"path":"ru/learn/smart-home-course/robonomics-iot-subscription-setup.md","name":"robonomics-iot-subscription-setup"},"defaultName":"Sovereign Smart Home with Robonomics and Home Assistant","lastUpdate":"Thu May 18 2023 10:46:29 GMT+0400 (Samara Standard Time)"}},"context":{}}