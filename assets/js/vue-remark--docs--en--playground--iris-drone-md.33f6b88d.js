(window.webpackJsonp=window.webpackJsonp||[]).push([[99],{"0iAi":function(t,o,n){"use strict";n.r(o);var e=n("7uw+"),s=n("UQSp"),a=n("Kw5r");function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}a.a.config.optionMergeStrategies;var i={VueRemarkRoot:s.a},l=function(t){var o=t.options.components=t.options.components||{},n=t.options.computed=t.options.computed||{};Object.keys(i).forEach((function(t){"object"===r(i[t])&&"function"==typeof i[t].render||"function"==typeof i[t]&&"function"==typeof i[t].options.render?o[t]=i[t]:n[t]=function(){return i[t]}}))},c=a.a.config.optionMergeStrategies,p="__vueRemarkFrontMatter",d={excerpt:null,title:"Connect unmanned aerial vehicle",description:"Connect unmanned aerial vehicle",docId:4,metaOptions:["Playground"]};var u=function(t){t.options[p]&&(t.options[p]=d),a.a.util.defineReactive(t.options,p,d),t.options.computed=c.computed({$frontmatter:function(){return t.options[p]}},t.options.computed)},g=Object(e.a)({},(function(){var t=this,o=t.$createElement,n=t._self._c||o;return n("VueRemarkRoot",[n("p",[n("strong",[t._v("Drone starts moving after transcation and store file with the coordinates in IPFS. The control script is based on the "),n("a",{attrs:{href:"https://github.com/generalized-intelligence/GAAS",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("GAAS demo script")])])]),n("div",{staticClass:"youtube-embed"},[n("div",{staticStyle:{width:"100%",margin:"0 auto"}},[n("div",{staticStyle:{position:"relative","padding-bottom":"56.25%","padding-top":"25px",height:"0"}},[n("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://www.youtube-nocookie.com/embed/4CwtGAX1OwM",allow:"autoplay; encrypted-media",allowfullscreen:""}})])])]),n("br"),n("h2",{attrs:{id:"requirements"}},[n("a",{attrs:{href:"#requirements","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Requirements")]),n("List",[n("li",[t._v(" dependencies for control:\n"),n("LessonCodeWrapper",{attrs:{language:"bash"}},[t._v("\nsudo apt install -y \\\n\tpython3-pip \\\n\tninja-build \\\n\texiftool \\\n\tpython-argparse \\\n\tpython-empy \\\n\tpython-toml \\\n\tpython-numpy \\\n\tpython-yaml \\\n\tpython-dev \\\n\tpython-pip \\\n\tninja-build \\\n\tprotobuf-compiler \\\n\tlibeigen3-dev \\\n\tgenromfs\n")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[t._v("\npip3 install \\\n\tpandas \\\n\tjinja2 \\\n\tpyserial \\\n\tcerberus \\\n\tpyulog \\\n\tnumpy \\\n\ttoml \\\n\tpyquaternion\n")])],1),n("li",{staticClass:"flex"},[n("p",[t._v("ROS Melodic + Gazebo "),n("a",{attrs:{href:"http://wiki.ros.org/melodic/Installation",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("installation tutorial")])])]),n("li",[t._v("extra packages:\n"),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\nsudo apt-get install ros-melodic-gazebo-ros-control ros-melodic-effort-controllers ros-melodic-joint-state-controller\nsudo apt-get install python-jinja2\nsudo apt-get install python-catkin-pkg\nsudo apt-get install python3-catkin-pkg-modules\n")])],1),n("li",[t._v("IPFS verson 0.4.22\n"),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\nwget https://dist.ipfs.io/go-ipfs/v0.4.22/go-ipfs_v0.4.22_linux-amd64.tar.gz\ntar -xvzf go-ipfs_v0.4.22_linux-amd64.tar.gz\ncd go-ipfs\nsudo bash install.sh\nipfs init\n")])],1),n("li",[t._v("ipfshttpclient\n"),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\npip3 install ipfshttpclient\n")])],1),n("li",{staticClass:"flex"},[n("p",[t._v("Robonomics node (binary file) (download latest release "),n("a",{attrs:{href:"https://github.com/airalab/robonomics/releases",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("here")]),t._v(")")])])]),n("br"),n("h2",{attrs:{id:"environment-setup"}},[n("a",{attrs:{href:"#environment-setup","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Environment Setup")]),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\nsudo apt-get install ros-melodic-mavros ros-melodic-mavros-extras\nwget https://raw.githubusercontent.com/mavlink/mavros/master/mavros/scripts/install_geographiclib_datasets.sh\nsudo ./install_geographiclib_datasets.sh\ncd ~/catkin_ws/src\ngit clone https://github.com/PX4/Firmware.git\ncd Firmware\ngit checkout v1.9.0\nbash ./Tools/setup/ubuntu.sh\n")]),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\ncd ~/catkin_ws/src\ngit clone https://github.com/generalized-intelligence/GAAS.git\ncp -r ~/catkin_ws/src/GAAS/simulator/models/* ~/catkin_ws/src/Firmware/Tools/sitl_gazebo/models/\ncp -r ~/catkin_ws/src/GAAS/simulator/worlds/* ~/catkin_ws/src/Firmware/Tools/sitl_gazebo/worlds/\ncp -r ~/catkin_ws/src/GAAS/simulator/posix-config/* ~/catkin_ws/src/Firmware/posix-configs/SITL/init/ekf2/\n")]),n("p",[t._v("Modifying your "),n("code",{pre:!0},[t._v(".bashrc")]),t._v(" file, adding the following lines to the bottom:  ")]),n("LessonCodeWrapper",{attrs:{language:"json",codeClass:"big-code"}},[t._v("\nsource ~/catkin_ws/devel/setup.bash   \nsource ~/catkin_ws/src/Firmware/Tools/setup_gazebo.bash ~/catkin_ws/src/Firmware/ ~/catkin_ws/src/Firmware/build posix_sitl_default \nexport GAZEBO_MODEL_PATH=:~/catkin_ws/src/simulator/models \nexport ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/catkin_ws/src/Firmware \nexport ROS_PACKAGE_PATH=$ROS_PACKAGE_PATH:~/catkin_ws/src/Firmware/Tools/sitl_gazebo\nexport GAZEBO_MODEL_PATH=:~/catkin_ws/src/simulator/models:~/catkin_ws/src/GAAS/simulator/models\n")]),n("h2",{attrs:{id:"control-package-installation"}},[n("a",{attrs:{href:"#control-package-installation","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Control Package Installation")]),n("p",[t._v("In a new Terminal:")]),n("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[t._v("\ncd catkin_ws/src\ngit clone https://github.com/tubleronchik/robonomics_drone_sim.git\ncd ..\ncatkin build\n")]),n("h2",{attrs:{id:"robonomics-network"}},[n("a",{attrs:{href:"#robonomics-network","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Robonomics Network")]),n("p",[t._v("To create a local robonomics network go to the folder with the robonomic binary file and run:  ")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[t._v("\n./robonomics --dev --rpc-cors all\n")]),n("p",[t._v("Add robonomic's path to "),n("code",{pre:!0},[t._v("config.py")])]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/IPFS.jpg",alt:"IPFS"}}),n("p",[t._v("Go to the "),n("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Robonomics Parachain portal")]),t._v(" and switch to local node.")]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/localNode.jpg",alt:"localNode"}}),n("p",[t._v("Go to "),n("strong",[t._v("Accounts")]),t._v(" and create "),n("strong",[t._v("DRONE")]),t._v(" and "),n("strong",[t._v("EMPLOYER")]),t._v(" accounts. Save the account names and keys and path to "),n("strong",[t._v("robonomics")]),t._v(" to "),n("code",{pre:!0},[t._v("~/catkin_ws/src/drone_sim/src/config.py")]),t._v(". Transfer some money into the accounts.")]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/addingAcc.jpg",alt:"accounts"}}),n("h2",{attrs:{id:"running-simulation"}},[n("a",{attrs:{href:"#running-simulation","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),t._v("Running Simulation")]),n("p",[t._v("Run IPFS daemon")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[t._v("\ncd go-ipfs\nipfs daemon\n")]),n("p",[t._v("In another terminal launch the simulation:")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[t._v("\nroslaunch px4 mavros_posix_sitl.launch\ncd ~/catkin_ws/src/robonomics_drone_sim/src\npython3 takeoff.py\n")]),n("p",[t._v('Waiting till "Waiting for payment" ')]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/launch.jpg",alt:"launch"}}),n("p",[t._v("To send a transaction run in another window:\n"),n("code",{pre:!0},[t._v('echo "ON" | ./robonomics io write launch -r <drone_addres> -s <employer_key>')]),t._v(" - where "),n("strong",[t._v("<drone_address>")]),t._v(" and "),n("strong",[t._v("<employer_key>")]),t._v(" should be replaced with the strings from "),n("code",{pre:!0},[t._v("config.py")]),t._v(" accordingly.")]),n("p",[t._v("After data was pushed to IPFS, go to the "),n("strong",[t._v("Chain State")]),t._v(" in "),n("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[t._v("Robonomics Parachain portal")]),t._v(". Select "),n("strong",[t._v("datalog")]),t._v(" in query and add DRONE datalog using "),n("code",{pre:!0},[t._v("+")]),t._v(" button.")]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/datalog.jpg",alt:"datalog"}}),n("p",[t._v("You can find drone's telemetry running "),n("code",{pre:!0},[t._v("https://gateway.ipfs.io/ipfs/<hash>")]),t._v(" inserting the hash from above.")]),n("LessonImages",{attrs:{imageClasses:"mb",src:"iris-drone/output.jpg",alt:"output"}}),n("p",[t._v("It's important to remove "),n("code",{pre:!0},[t._v("db")]),t._v(" derictory before next launches using"),n("br"),n("code",{pre:!0},[t._v("rm -rf ~/.local/share/robonomics/chains/dev/db")])])],1)}),[],!1,null,null,null);"function"==typeof l&&l(g),"function"==typeof u&&u(g);o.default=g.exports},UQSp:function(t,o,n){"use strict";o.a={name:"VueRemarkRoot",render:function(t){return t("div",null,this.$slots.default)}}}}]);