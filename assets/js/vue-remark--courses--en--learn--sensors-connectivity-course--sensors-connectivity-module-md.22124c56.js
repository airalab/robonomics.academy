(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{UQSp:function(e,t,n){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}},lcSm:function(e,t,n){"use strict";n.r(t);var o=n("7uw+"),a=n("UQSp"),s=n("Kw5r");function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}s.a.config.optionMergeStrategies;var i={VueRemarkRoot:a.a},l=function(e){var t=e.options.components=e.options.components||{},n=e.options.computed=e.options.computed||{};Object.keys(i).forEach((function(e){"object"===r(i[e])&&"function"==typeof i[e].render||"function"==typeof i[e]&&"function"==typeof i[e].options.render?t[e]=i[e]:n[e]=function(){return i[e]}}))},c=s.a.config.optionMergeStrategies,d="__vueRemarkFrontMatter",p={excerpt:null,title:"Lesson #4, Sensors connectivity module",description:"SENSORS CONNECTIVITY MODULE",lessonNumber:4,courseID:4,metaOptions:["Learn","Sensors Connectivity & Decentralized Sensors Network"],defaultName:"Sensors Connectivity & Decentralized Sensors Network"};var u=function(e){e.options[d]&&(e.options[d]=p),s.a.util.defineReactive(e.options,d,p),e.options.computed=c.computed({$frontmatter:function(){return e.options[d]}},e.options.computed)},h=Object(o.a)({},(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("VueRemarkRoot",[n("p",[e._v("In the following articles, you will learn more about the Sensor Connectivity module. After that, you can join hosting our Decentralized Sensors Network or create your own sensor map.")]),n("h2",{attrs:{id:"about-sensors-connectivity"}},[n("a",{attrs:{href:"#about-sensors-connectivity","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),e._v("About Sensors Connectivity")]),n("p",[e._v("Decentralized Sensors Network uses the "),n("code",{pre:!0},[e._v("sensors-connectivity")]),e._v(" Python module ("),n("a",{attrs:{href:"https://github.com/airalab/sensors-connectivity",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("source code")]),e._v("). This module allows any user to launch their own server to receive data from sensors and process it further. At the moment, the developers have launched several such servers and any sensor can send data to them. Running multiple servers avoids data loss in case of problems with one of them, as the sensors will switch from a non-working server to a working one. Basically, you can think of the Sensors Connectivity module as a black box with one input (sensor data) and many outputs.")]),n("LessonImages",{attrs:{figure:"",figureCaption:"Module architecture",src:"sensors-connectivity-course/lesson-4-1.png",alt:"Module architecture"}}),n("p",[e._v("Sensors Connectivity module is a set of stations (station_1, station_2 ... station_n), which receive various data, including data from sensors via HTTP protocol. Also it can be sensors connected to the computer via USB or any other data source. Data received from the stations are processed by the module and passed to feeders (feeder_1, feeder_2 ... feeder_n). The feeders send the processed data to the user; in our case the data is sent to the decentralized IPFS channel. ")]),n("p",[e._v("A map of "),n("a",{attrs:{href:"https://sensors.robonomics.network/#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Decentralized Sensors Network")]),e._v(" is a decentralized application (dapp) running on the computer. It reads data from the IPFS channel and displays it on the map. There is no direct connection between the server that collects data from the sensors and the map that the user sees; data is transferred between them via IPFS pubsub, which reduces the load on the servers. ")]),n("p",[e._v("In addition, from time to time, a file with data for the last period of time is stored in IPFS, and a hash of this data is then recorded on the blockchain. Since IPFS is a content-addressed network, storing data in it ensures that any data change does not go unnoticed, because the address of the needed file contains a hash of its content, which will change with any data change. The blockchain is used to pass the hash to the user, who can use it to get the needed data from IPFS (this happens when you request a history of the map).")]),n("h2",{attrs:{id:"module-setup-for-linux"}},[n("a",{attrs:{href:"#module-setup-for-linux","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),e._v("Module Setup for Linux")]),n("p",[n("strong",[e._v("Pre-requirements and Installation")])]),n("List",{attrs:{type:"numbers"}},[n("li",[n("p",[e._v("To build "),n("code",{pre:!0},[e._v("sensors-connectivity")]),e._v(" module the IPFS daemon has to be installed with version no greater than "),n("code",{pre:!0},[e._v("0.8.x")]),e._v(". Assuming, you work on Linux, execute the following (for version "),n("code",{pre:!0},[e._v("0.8.0")]),e._v("):")]),n("LessonCodeWrapper",{attrs:{codeClass:"big-code",language:"bash"}},[e._v("wget https://dist.ipfs.io/go-ipfs/v0.8.0/go-ipfs_v0.8.0_linux-amd64.tar.gz\ntar -xzf go-ipfs_v0.8.0_linux-amd64.tar.gz\ncd go-ipfs\nsudo bash install.sh\nipfs init")])],1),n("li",[n("p",[e._v("Install package with development tools "),n("code",{pre:!0},[e._v("python3-dev")]),e._v(" and package installer for Python "),n("code",{pre:!0},[e._v("pip")]),e._v(":")]),n("LessonCodeWrapper",{attrs:{codeClass:"long-code",language:"bash"}},[e._v("sudo apt install python3-dev python3-pip")])],1),n("li",[n("p",[e._v("Install the module as a PyPI package:")]),n("LessonCodeWrapper",{attrs:{codeClass:"long-code",language:"bash"}},[e._v("pip3 install sensors-connectivity")]),n("p",[e._v("If you see following warning: ")]),n("LessonCodeWrapper",{attrs:{codeClass:"big-code",language:"bash"}},[e._v("WARNING: The script sensors_connectivity is installed in '/home/test2/.local/bin' which is not on PATH.\nConsider adding this directory to PATH or, if you prefer to suppress this warning, use --no-warn-script-location.")]),n("p",[e._v("Run next command:")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[e._v('cd ~\nexport PATH="/usr/local/bin:$PATH"\nsource .profile')])],1)]),n("h2",{attrs:{id:"configuration"}},[n("a",{attrs:{href:"#configuration","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),e._v("Configuration")]),n("List",{attrs:{type:"numbers"}},[n("li",[n("p",[e._v("Create directory for configuration file and database file wherever you want. This database will save IPFS hashes of sensor data, timestamp and service status:")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[e._v("cd ~\nmkdir sensors_connectivity\ncd sensors_connectivity\ntouch database.db")]),n("RoboAcademyNote",{attrs:{type:"okay",title:"INFO"}},[e._v("\nName of the database file can be any, but extension must be "),n("code",[e._v(".db")])])],1),n("li",[n("p",[e._v("Create configuration file in the same directory:")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[e._v("touch my_config.json")])],1),n("li",[n("p",[e._v("Copypaste the following to the file and insert full path to the database file in db_path field. This configuration will be enough to get sensors data over HTTP and send it to the Robonomics map:")]),n("LessonCodeWrapper",{attrs:{codeClass:"big-code",language:"json"}},[e._v('{\n   "general": {\n      "publish_interval": 30,\n      "db_path": "'),e._v('/PATH/TO/DATABASE>"\n   },\n   "comstation": {\n      "enable": false,\n      "port": "/dev/'),e._v('/PATH/TO/BOARD>",\n      "work_period": 300,\n      "geo": "00.000000,00.000000",\n      "public_key": ""\n   },\n   "httpstation": {\n      "enable": true,\n      "port": 8001\n   },\n   "mqttstation": {\n      "enable": false,\n      "host": "localhost",\n      "port": 1883,\n      "topic": "/freertos_mqtt_robonomics_example/#",\n      "username": "",\n      "password": ""\n   },\n   "robonomics": {\n      "enable": true,\n      "ipfs_provider": "/ip4/127.0.0.1/tcp/5001/http",\n      "ipfs_topic": "airalab.lighthouse.5.robonomics.eth"\n   },\n   "datalog": {\n      "enable": false,\n      "suri": "",\n      "dump_interval": 60,\n      "temporal_username": "",\n      "temporal_password": "",\n      "pinata_api": "",\n      "pinata_secret": ""\n   },\n   "dev": {\n      "sentry": ""\n   },\n   "frontier": {\n      "enable": false,\n      "suri": ""\n   },\n   "trackagro": {\n      "enable": false,\n      "token": ""\n   }\n}')])],1)]),n("h2",{attrs:{id:"launch"}},[n("a",{attrs:{href:"#launch","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),e._v("Launch")]),n("List",{attrs:{type:"numbers"}},[n("li",[n("p",[e._v("Launch IPFS daemon:")]),n("LessonCodeWrapper",{attrs:{codeCLass:"big-code",language:"bash"}},[e._v("ipfs daemon --enable-pubsub-experiment")])],1),n("li",[n("p",[e._v("After config is set, run the service with the path to config file in another terminal:")]),n("LessonCodeWrapper",{attrs:{language:"bash"}},[e._v('sensors_connectivity "path/to/your/config/file”')])],1),n("li",[n("p",[e._v("You will see logs in the terminal (also, they will be added to "),n("code",{pre:!0},[e._v("~/.logs")]),e._v("). Example:")]),n("LessonCodeWrapper",{attrs:{codeClass:"big-code",language:"bash"}},[e._v("$ sensors_connectivity test.json\n2022-09-02 14:08:48,408 - INFO - Getting data from the stations...\n2022-09-02 14:08:48,409 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:08:48,409 - INFO - Sending result to the feeders...\n2022-09-02 14:08:48,411 - INFO - Checking data base...\n2022-09-02 14:09:18,410 - INFO - Sending result to the feeders...\n2022-09-02 14:09:18,410 - INFO - Getting data from the stations...\n2022-09-02 14:09:18,411 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:09:48,411 - INFO - Sending result to the feeders...\n2022-09-02 14:09:48,412 - INFO - Getting data from the stations...\n2022-09-02 14:09:48,413 - INFO - airalab-http-v0.8.0: [[]]\n2022-09-02 14:10:18,413 - INFO - Sending result to the feeders...\n2022-09-02 14:10:18,413 - INFO - Getting data from the stations...")])],1)]),n("h2",{attrs:{id:"post-installation"}},[n("a",{attrs:{href:"#post-installation","aria-hidden":"true"}},[n("span",{staticClass:"icon icon-link"})]),e._v("Post-installation")]),n("p",[e._v("To connect your "),n("code",{pre:!0},[e._v("sensors-connectivity")]),e._v(" module to our Decentralized Sensors Network and see your data on the map, you have to send your IPFS ID to "),n("a",{attrs:{href:"mailto:vm@multi-agent.io",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("vm@multi-agent.io")]),e._v(" or "),n("a",{attrs:{href:"mailto:ping@airalab.org",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("ping@airalab.org")]),e._v(". We will add your ID to an access-control list.")]),n("p",[e._v("Get your IPFS "),n("code",{pre:!0},[e._v("ID")]),e._v(" with the following command after running IPFS daemon:")]),n("LessonCodeWrapper",{attrs:{codeClass:"big-code",language:"bash"}},[e._v('$ ipfs id\n{\n\t"ID": "QmUZxw8jsRpSx5rWkTpJokPGKvWihTrt5rbRCFXzJ4eCAP",\n\t"PublicKey": "CAASpgIwggEiMA0GCSqGSIb3DQEBAQUAA4IBDwAwggEKAoIBAQC/uMV3rLM/C+LOh2DGPo3chr+VM+vyYMKi...\n    ...')])],1)}),[],!1,null,null,null);"function"==typeof l&&l(h),"function"==typeof u&&u(h);t.default=h.exports}}]);