(window.webpackJsonp=window.webpackJsonp||[]).push([[51],{UQSp:function(e,t,o){"use strict";t.a={name:"VueRemarkRoot",render:function(e){return e("div",null,this.$slots.default)}}},lJ98:function(e,t,o){"use strict";o.r(t);var s=o("7uw+"),n=o("UQSp"),a=o("Kw5r");function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}a.a.config.optionMergeStrategies;var c={VueRemarkRoot:n.a},r=function(e){var t=e.options.components=e.options.components||{},o=e.options.computed=e.options.computed||{};Object.keys(c).forEach((function(e){"object"===i(c[e])&&"function"==typeof c[e].render||"function"==typeof c[e]&&"function"==typeof c[e].options.render?t[e]=c[e]:o[e]=function(){return c[e]}}))},u=a.a.config.optionMergeStrategies,d="__vueRemarkFrontMatter",p={excerpt:null,title:"Lesson #5, Robonomics IoT Subscription Setup",description:"home assistant course",lessonNumber:6,courseID:3,metaOptions:["Learn","Sovereign Smart Home with Robonomics and Home Assistant"],defaultName:"Sovereign Smart Home with Robonomics and Home Assistant"};var h=function(e){e.options[d]&&(e.options[d]=p),a.a.util.defineReactive(e.options,d,p),e.options.computed=u.computed({$frontmatter:function(){return e.options[d]}},e.options.computed)},l=Object(s.a)({},(function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("VueRemarkRoot",[o("h2",{attrs:{id:"whats-this-about"}},[o("a",{attrs:{href:"#whats-this-about","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("What's this about")]),o("p",[e._v("Robonomics IoT Subscription allows users to use all functions of the parachain for a certain period without paying the standard transaction fees. By activating the subscription, devices will be able to send transactions in priority.")]),o("p",[e._v("In this lesson, you will create the necessary smart home security accounts and purchase an IoT subscription.")]),o("h2",{attrs:{id:"theory"}},[o("a",{attrs:{href:"#theory","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Theory")]),o("p",[e._v("An IoT subscription, as well as the method it is purchased and managed, is implemented using an "),o("code",[e._v("rws")]),e._v(" pallet, which contains all the necessary functions. In general, subscriptions in Robonomics are sold with an auction model, which uses an "),o("code",[e._v("rws.startAuction()")]),e._v(" extrinsic to create an auction for a specific subscription ID. Users can access the auction by ID and bid using an "),o("code",[e._v("rws.bid()")]),e._v(" extrinsic.")]),o("p",[e._v("After the end of the auction, the address with the winning bid is assigned to the subscription. Now this address will be able to send transactions through the "),o("code",[e._v("rws.call()")]),e._v(" extrinsic without fees. However, this does not mean that the address can do this uncontrollably at any time: each subscription has a certain amount of a "),o("code",[e._v("weight")]),e._v(" value, which must accumulate before a free transaction can be performed. Some "),o("code",[e._v("weight")]),e._v(" value is added to the subscription every block generated in the parachain, due to this, Robonomics regulates the bandwidth of the parachain.")]),o("p",[e._v("In addition, the owner of the subscription can use the "),o("code",[e._v("rws.setDevices()")]),e._v(" extrinsic, which shares the use of the subscription to the specified addresses. At the same time, "),o("code",[e._v("weight")]),e._v(" remains the same, so the more addresses in the subscription, the longer each of them will have to wait before sending the free transaction.")]),o("p",[e._v("To control Home Assistant with Robonomics, you need two accounts on the Robonomics parachain. These accounts will provide security for your Home Assistant.")]),o("p",[e._v("With one of the accounts ("),o("code",[e._v("SUB_OWNER")]),e._v("), you will buy a Robonomics subscription. This account acts as the main administrator of the IoT subscription, and provides access to Home Assistant to other users (using "),o("code",[e._v("rws.setDevices()")]),e._v("). This account must have some XRT tokens in order to complete subscription purchase transactions.")]),o("p",[e._v("Second account ("),o("code",[e._v("SUB_CONTROLLER")]),e._v(") will control all Home Assistant processes of devices (such as telemetry). Transactions of your devices will be sent on behalf of the "),o("code",[e._v("SUB_CONTROLLER")]),e._v(" account. You (and anyone) will be able to see these transactions in any parachain explorer like "),o("a",{attrs:{href:"https://robonomics.subscan.io/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Subscan")]),e._v(". However, only you will be able to decrypt the contents of these transactions as long as you securely possess the necessary seed phrases.")]),o("h2",{attrs:{id:"instructions"}},[o("a",{attrs:{href:"#instructions","aria-hidden":"true"}},[o("span",{staticClass:"icon icon-link"})]),e._v("Instructions")]),o("List",{attrs:{type:"numbers"}},[o("li",[o("p",[e._v("Creating Owner and Controller Parachain Accounts")]),o("List",[o("li",[o("robo-academy-note",{attrs:{type:"warning",title:"WARNING"}},[e._v("\nBoth accounts must be created with ed25519 encryption.\n")])],1),o("li",[o("p",[e._v("Go to "),o("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("Robonomics Parachain app")]),e._v(" on Polkadot / Substrate Portal. Check the top left corner to ensure that you are connected to Robonomics Parachain.")])]),o("li",[o("p",[e._v("Because of using "),o("em",[e._v("ed25519")]),e._v(" format, you need to create an account using the Polkadot-JS UI and select the required encryption. ")]),o("p",[e._v("This feature is disabled by default on the Polkadot-JS UI. To enable it, navigate to "),o("code",[e._v("Settings")]),e._v(" -> "),o("code",[e._v("General")]),e._v(" -> "),o("code",[e._v("account options")]),e._v(" and select "),o("code",[e._v("Allow local in-browser account storage")]),e._v(" in the drop-down menu "),o("code",[e._v("in-browser account creation")]),e._v(".")])]),o("li",[o("p",[e._v("Go to "),o("code",[e._v("Accounts")]),e._v(" -> "),o("code",[e._v("Accounts")]),e._v(" and press the "),o("code",[e._v("Add account")]),e._v(" button. You will see the popup menu with account seed. It has two forms: "),o("em",[e._v("Mnemonic")]),e._v(" (human-readable) and "),o("em",[e._v("Raw")]),e._v(" (a sequence of digits and letters).")]),o("LessonVideo",{attrs:{videos:[{src:"https://crustipfs.live/ipfs/QmQiJYPYajUJXENX2PzSJMSKGSshyWyPNqugSYxP5eCNvm",type:"mp4"}]}})],1),o("li",[o("p",[e._v("Open "),o("code",[e._v("Advanced creation options")]),e._v(", change the crypto type of creating account to "),o("code",[e._v("Edwards - ed25519")]),e._v(". Save the mnemonic seed phrase securely and press "),o("code",[e._v("Next")]),e._v(".")])]),o("li",[o("p",[e._v("In the next menu, you need to set the account name and password. Give it a name "),o("code",[e._v("SUB_OWNER")]),e._v(" for convenience and press "),o("code",[e._v("Next")]),e._v(".")])]),o("li",[o("p",[e._v("On the last window click "),o("code",[e._v("Save")]),e._v(" to finish account creation. It will also generate a backup JSON-files that you should safely store. You can later use this file to recover your account if you remember the password.")])]),o("li",[o("p",[e._v("Repeat these steps for the "),o("code",[e._v("SUB_CONTROLLER")]),e._v(" account.")])])])],1),o("li",[o("p",[e._v("Adding Accounts to Polkadot.js Extension")]),o("List",{attrs:{type:"numbers"}},[o("li",[o("p",[e._v("For convenience, you should use the Polkadot.js extension and add these newly created accounts to it. For an ed25519 account you can do that only with a backup JSON file. You can use the files saved when you created the accounts.")]),o("p",[e._v("You can get these files again by creating a backup file of the account. Press on three dots on your account, choose "),o("code",[e._v("Create a backup file for this account")]),e._v(" and type in your password.")]),o("LessonVideo",{attrs:{videos:[{src:"https://crustipfs.live/ipfs/QmRd7gztUjWkLF4W2XuJwy5aXBwzNV2aPCU6CQQLvUpSNj",type:"mp4"}]}})],1),o("li",[o("p",[e._v("Open an extension and press "),o("code",[e._v("+")]),e._v(" button on the top right, then choose "),o("code",[e._v("Restore account from backup JSON file")]),e._v(".")])]),o("li",[o("p",[e._v("In an opened window upload the JSON file, enter the password and press "),o("code",[e._v("Restore")])])]),o("li",[o("p",[e._v("Make sure the Robonomics network is selected for accounts in the Polkadot.js extension. On on Polkadot / Substrate Portal go to "),o("code",[e._v("Setting")]),e._v(" -> "),o("code",[e._v("Metadata")]),e._v(" and click on the "),o("code",[e._v("Update metadata")]),e._v(" button. ")]),o("LessonVideo",{attrs:{videos:[{src:"https://crustipfs.live/ipfs/QmT5sTNP9t8gpbD4RJJw6ETwG4wiziiChAh2uHHBk9Zsyd",type:"mp4"}]}})],1),o("li",[o("p",[e._v("Confirm the metadata update in the popup. Now the extension will show the label of the network for which the address is used.")])])])],1),o("li",[o("p",[e._v("Activating Robonomics Subscription")]),o("List",[o("li",[o("robo-academy-note",{attrs:{type:"okay"}},[e._v("\nFor this step, you must have a sufficient amount of XRT tokens (minimum 2-3 XRTs) in your "),o("code",[e._v("SUB_OWNER")]),e._v(" account.\n")]),o("p",[e._v("Go to Robonomics dapp to the "),o("a",{attrs:{href:"https://dapp.robonomics.network/#/subscription",target:"_blank",rel:"nofollow noopener noreferrer"}},[e._v("subscription page")]),e._v(" and press "),o("code",[e._v("connect account")]),e._v(" on the right sidebar.")]),o("LessonVideo",{attrs:{videos:[{src:"https://crustipfs.live/ipfs/QmXrFCajmJgkRDSbshGD3QehjnoyS6jafEPSjHdYkoBHum",type:"mp4"}]}})],1),o("li",[o("p",[e._v("In the following popup menu connect Polkadot.js extension. You will see your account address with balance.")])]),o("li",[o("p",[e._v("Before purchasing, check that you chose the "),o("code",[e._v("SUB_OWNER")]),e._v(" account. Press the address profile icon, you should see the "),o("code",[e._v("SUB_OWNER")]),e._v(" account under the "),o("code",[e._v("Check owner account")]),e._v(" field.")])]),o("li",[o("p",[e._v("Finally, press the "),o("code",[e._v("SUBMIT")]),e._v(" button and enter the password for your account. After that wait until the activation process is completed. You will see the state of your subscription after a while.")]),o("p",[e._v("If no subscriptions are available, "),o("strong",[e._v("please contact")]),e._v(" the Robonomics team.")])])])],1),o("li",[o("p",[e._v("Adding Account to Subscription")]),o("List",{attrs:{type:"numbers"}},[o("li",[o("p",[e._v("Now you need to add the "),o("code",[e._v("SUB_CONTROLLER")]),e._v(" account to "),o("strong",[e._v("the access list")]),e._v(". Open extension and click on the icon near the account name. It will copy the account address.")]),o("LessonVideo",{attrs:{videos:[{src:"https://crustipfs.live/ipfs/QmV1gkwtcXsWv54ov9tuXfcHg7nqs1foM8cRwts4sqnqtX",type:"mp4"}]}})],1),o("li",[o("p",[e._v("Paste this address to the "),o("code",[e._v("Robonomics parachain address")]),e._v(" field in the "),o("strong",[e._v("Manage access")]),e._v(" part.")]),o("p",[e._v("Give it a name and press the "),o("code",[e._v("+")]),e._v(" button. Enter your "),o("code",[e._v("SUB_OWNER")]),e._v(" password in the popup window and wait until the activation process is completed.")])]),o("li",[e._v("\nRepeat steps for the "),o("code",[e._v("SUB_OWNER")]),e._v(" account.\n")])])],1)])],1)}),[],!1,null,null,null);"function"==typeof r&&r(l),"function"==typeof h&&h(l);t.default=l.exports}}]);