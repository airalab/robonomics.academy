(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{UQSp:function(o,e,t){"use strict";e.a={name:"VueRemarkRoot",render:function(o){return o("div",null,this.$slots.default)}}},WV6c:function(o,e,t){"use strict";t.r(e);var n=t("7uw+"),r=t("UQSp"),a=t("Kw5r");function s(o){return(s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(o){return typeof o}:function(o){return o&&"function"==typeof Symbol&&o.constructor===Symbol&&o!==Symbol.prototype?"symbol":typeof o})(o)}a.a.config.optionMergeStrategies;var i={VueRemarkRoot:r.a},c=function(o){var e=o.options.components=o.options.components||{},t=o.options.computed=o.options.computed||{};Object.keys(i).forEach((function(o){"object"===s(i[o])&&"function"==typeof i[o].render||"function"==typeof i[o]&&"function"==typeof i[o].options.render?e[o]=i[o]:t[o]=function(){return i[o]}}))},l=a.a.config.optionMergeStrategies,p="__vueRemarkFrontMatter",d={excerpt:null,title:"Connect Mars Curiosity Rover",description:"Connect Mars Curiosity rover under Robonomics parachain control.",courseID:111,metaOptions:["Learn"],defaultName:"Connect Mars Curiosity Rover"};var u=function(o){o.options[p]&&(o.options[p]=d),a.a.util.defineReactive(o.options,p,d),o.options.computed=l.computed({$frontmatter:function(){return o.options[p]}},o.options.computed)},m=Object(n.a)({},(function(){var o=this,e=o.$createElement,t=o._self._c||e;return t("VueRemarkRoot",[t("p",[t("strong",[o._v("Let's see how Robonomics Parachain control allows to make Mars Curiosity rover move. Requirements:")])]),t("List",[t("li",{staticClass:"flex"},[t("p",[o._v("ROS Melodic + Gazebo + RViz (installation manual "),t("a",{attrs:{href:"http://wiki.ros.org/melodic/Installation",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("here")]),o._v(")")])]),t("li",[o._v("extra packages:\n"),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"big-code"}},[o._v("\n  sudo apt-get install ros-melodic-gazebo-ros-control ros-melodic-effort-controllers ros-melodic-joint-state-controller\n")])],1),t("li",{staticClass:"flex"},[t("p",[o._v("IPFS up to "),t("a",{attrs:{href:"https://dist.ipfs.io/go-ipfs/v0.6.0/go-ipfs_v0.6.0_linux-386.tar.gz",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("0.6.0")])])]),t("li",{staticClass:"flex"},[t("p",[t("a",{attrs:{href:"https://github.com/ipfs/ipfs-companion",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("IPFS Companion Extension")])])]),t("li",{staticClass:"flex"},[t("p",[o._v("Robonomics node (binary file) (download latest release "),t("a",{attrs:{href:"https://github.com/airalab/robonomics/releases",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("here")]),o._v(". This tutorial tested fine on v1.1)")])])]),t("br"),t("p",[o._v("Here is the video showing successful launch:")]),t("div",{staticClass:"youtube-embed"},[t("div",{staticStyle:{width:"100%",margin:"0 auto"}},[t("div",{staticStyle:{position:"relative","padding-bottom":"56.25%","padding-top":"25px",height:"0"}},[t("iframe",{staticStyle:{position:"absolute",top:"0",left:"0",width:"100%",height:"100%"},attrs:{src:"https://www.youtube-nocookie.com/embed/6BSOyRbmac8",allow:"autoplay; encrypted-media",allowfullscreen:""}})])])]),t("br"),t("h3",{attrs:{id:"1-set-up-a-simulation"}},[t("a",{attrs:{href:"#1-set-up-a-simulation","aria-hidden":"true"}},[t("span",{staticClass:"icon icon-link"})]),o._v("1. Set up a simulation")]),o._v("\nDownload Curiosity rover package:\n"),t("LessonCodeWrapper",{attrs:{language:"bash"}},[o._v("\n  mkdir -p robonomics_ws/src\n  cd robonomics_ws/src\n  git clone https://bitbucket.org/theconstructcore/curiosity_mars_rover/src/master/\n  cd ..\n  catkin build\n\n")]),t("p",[o._v("We need to adjust starting conditions to make our rover spawn smoothly:")]),t("List",[t("li",[o._v("Go to\n"),t("p",[t("code",{pre:!0},[o._v("src/master/curiosity_mars_rover_description/worlds")]),o._v(" and change line 14 of the file"),t("code",{pre:!0},[o._v("mars_curiosity.world")]),o._v(" to \n"),t("code",{pre:!0},[o._v("<pose>0 0 8 0 0 0</pose>")])])]),t("li",[o._v("Go to\n"),t("p",[t("code",{pre:!0},[o._v("src/master/curiosity_mars_rover_description/launch")]),o._v(" and change line 4 of the file  "),t("code",{pre:!0},[o._v("mars_curiosity_world.launch")]),o._v(" to \n"),t("code",{pre:!0},[o._v('<arg name="paused" default="false"/>')])]),t("p",[o._v("Don't forget to add source command to "),t("code",{pre:!0},[o._v("~/.bashrc")]),t("code",{pre:!0},[o._v("source /home/$USER/robonomics_ws/devel/setup.bash")])])]),t("li",[o._v(" Reboot console and launch the simulation:\n"),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"long-code"}},[o._v("\n  roslaunch curiosity_mars_rover_description main_real_mars.launch\n")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/rover.jpg",alt:"Mars rover"}})],1)]),t("p",[o._v("Note: if the image is dark, e.g. shadowed, change "),t("code",{pre:!0},[o._v("Camera")]),o._v(" to "),t("code",{pre:!0},[o._v("Orthorgraphic")]),o._v(" in Gazebo toolbar.\nThe simulation can be closed for a while.")]),t("hr"),t("br"),t("h3",{attrs:{id:"2-download-robonomics-controller-package"}},[t("a",{attrs:{href:"#2-download-robonomics-controller-package","aria-hidden":"true"}},[t("span",{staticClass:"icon icon-link"})]),o._v("2. Download Robonomics controller package")]),t("p",[o._v("To download a controller package for Rover type in terminal:")]),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"long-code"}},[o._v("\ncd ~/robonomics_ws/src\ngit clone https://github.com/PaTara43/robonomics_sample_controller\ncd robonomics_sample_controller\npip3 install -r requirements.txt\npip3 install rospkg\ncd ..\ncatkin build -DPYTHON_EXECUTABLE=/usr/bin/python3 # The controller supports python3\n")]),t("hr"),t("br"),t("h3",{attrs:{id:"3-manage-accounts-in-dapp"}},[t("a",{attrs:{href:"#3-manage-accounts-in-dapp","aria-hidden":"true"}},[t("span",{staticClass:"icon icon-link"})]),o._v("3. Manage accounts in DAPP")]),t("p",[o._v("Since we are testing, let us create a local robonomics network with robonomics binary file:")]),t("LessonCodeWrapper",{attrs:{language:"bash"}},[o._v("\n  ./robonomics --dev --tmp\n")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/robonomics.jpg",alt:"Running node"}}),t("p",[o._v("Go to "),t("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("Robonomics Parachain portal")]),o._v(" and switch to local node ")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/local_node.jpg",alt:"Local node"}}),t("p",[o._v("Go to Accounts and create "),t("strong",[o._v("CURIOSITY")]),o._v(" and "),t("strong",[o._v("EMPLOYER")]),o._v(" accounts.")]),t("p",[t("strong",[o._v("Important")]),o._v("! Copy each account's address (to copy address click on account's icon) and Curiosity's account "),t("strong",[o._v("mnemonic seed")]),o._v(" (obtained while creating the account)\nTransfer some money (units) to these accounts. You can read more about accounts in Robonomics "),t("a",{attrs:{href:"https://wiki.robonomics.network/docs/en/create-account-in-dapp/",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("here")])]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/account_creation.jpg",alt:"Account creation"}}),t("p",[o._v("Add these addresses, seed and node address (defaults to "),t("code",{pre:!0},[o._v("ws://127.0.0.1:9944")]),o._v(" for developer node) in "),t("code",{pre:!0},[o._v("config.config")]),o._v(" in "),t("code",{pre:!0},[o._v("robonomics_ws/src/robonomics_sample_controller/src")]),o._v(". No quotes.")]),t("hr"),t("br"),t("h3",{attrs:{id:"4-start-robonomics"}},[t("a",{attrs:{href:"#4-start-robonomics","aria-hidden":"true"}},[t("span",{staticClass:"icon icon-link"})]),o._v("4. Start Robonomics")]),t("p",[o._v("Before going further, make sure that you have installed "),t("a",{attrs:{href:"https://github.com/ipfs/ipfs-companion",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("IPFS Companion Extension")]),o._v(".")]),t("p",[o._v("In a separate terminal launch IPFS:")]),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"long-code"}},[o._v("\nifps init #you only need to do this once per IPFS installation\nipfs daemon\n")]),o._v("\nIn another separate terminal launch Curiosity simulation if it's not live:\n"),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"long-code"}},[o._v("\nroslaunch curiosity_mars_rover_description main_real_mars.launch\n\n")]),t("p",[o._v("Wait till it stays still")]),t("p",[o._v("In another terminal launch the controller:")]),t("LessonCodeWrapper",{attrs:{language:"bash",codeClass:"long-code"}},[o._v("\nrosrun robonomics_sample_controller sample_controller.py\n")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/controller.jpg",alt:"Controller"}}),t("p",[o._v("Now you can send a transaction triggering the Rover to start moving and collecting data. To do so, you can use the same "),t("a",{attrs:{href:"https://polkadot.js.org/apps/?rpc=wss%3A%2F%2Fkusama.rpc.robonomics.network%2F#/",target:"_blank",rel:"nofollow noopener noreferrer"}},[o._v("Robonomics Parachain portal")]),o._v(".\nGo to "),t("code",{pre:!0},[o._v("Developer->Extrinsics")]),o._v(" and select Curiosity's employer account, "),t("code",{pre:!0},[o._v("launch")]),o._v(" extrinsic, Curiosity's account as a target account and "),t("code",{pre:!0},[o._v("yes")]),o._v(" as a parameter.\nSubmit the extrinsic.")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/extrinsic.jpg",alt:"Extrinsic"}}),t("p",[o._v("The robot should start moving. It won't accept commands from other accounts neither commands with "),t("code",{pre:!0},[o._v("no")]),o._v(" parameter. The rover will move around and collect data for about a minute.\nLater, when the job is done:")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/job_done.jpg",alt:"Job done"}}),t("p",[o._v("On the Robonomics portal go to "),t("code",{pre:!0},[o._v("Developer -> Chain state")]),o._v(" and obtain a "),t("code",{pre:!0},[o._v("CURIOSITY")]),o._v(" datalog using “+” button with selected "),t("code",{pre:!0},[o._v("datalog -> RingBufferItem")]),o._v(" as query: ")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/datalog.jpg",alt:"Datalog"}}),t("p",[o._v("Now the IPFS hash of the telemetry is saved in the blockchain. To see the data simply copy the hash and find it on a gateway:")]),t("LessonImages",{attrs:{imageClasses:"mb",src:"connect-mars-curiosity-rover/data_in_ipfs.jpg",alt:"Data in IPFS"}}),t("p",[o._v("This telemetry is kept in a decentralized storage, and it's hash is stored in a blockchain!")])],1)}),[],!1,null,null,null);"function"==typeof c&&c(m),"function"==typeof u&&u(m);e.default=m.exports}}]);